<!-- <div class="animated fadeIn">
	<div class="col-lg col-md-6">
	  <div class="card">
		  <div class="card-header d-flex">
			  <div class="chead">Opportunity Listing <a class="btn btn-icon btn-outline-secondary btn-white" routerLink="/opportunity/new"><i class="cil-plus c-icon"></i></a></div>			  
			  <div class="ml-auto d-flex">
				  <div class="pr-2"><input type="text" class="form-control" placeholder="Search..." /></div>
				  <div class="pr-2"><a class="btn btn-success">?</a></div>
				  <div class="pr-2"><a class="btn btn-success">?</a></div>
				  <div><a class="btn btn-success">?</a></div>
			  </div>			
		  </div>
				
		  <div class="card-body p-0">
		  
			<table class="table table-bordered m-0">
			  <thead>
				  <tr>
					  <th>Created Date</th>
					  <th>Opportunity ID</th>
					  <th>Topic</th>
					  <th>Company Name</th>					
					  <th>Opportunity Status</th>                
					  <th>Est. Value (RM)</th>
					  <th>Action</th>
				  </tr>
			  </thead>
			  <tbody>
				  <tr *ngFor="let opportunity of opportunities; let i=index">
					  <td>{{opportunity.created_at | date:'dd-MMM-yyyy'}}</td>
					  <td>{{opportunity.opportunity_code}}</td>
					  <td>{{opportunity.topic}}</td>
					  <td>{{opportunity.company_name}}</td>
					  <td>{{opportunity.status_id}}</td>
					  <td>{{opportunity.amount | currency: 'MYR'}}</td>
					  <td><a [routerLink]="['/opportunity/edit/', opportunity.id]"><i class="cil-pencil c-icon"></i></a></td>            		
				  </tr>            	
			  </tbody>
			</table>
		  </div>
   
	  </div>
	</div>
  </div> -->

<p-table
  [loading]="loading"
  class="table table-hover table-striped"
  #dt
  [value]="opportunities"
  styleClass="p-datatable-opportunity"
  [rowHover]="true"
  [filterDelay]="0"
  [globalFilterFields]="['opportunity_code', 'topic', 'company_name']"
>
  <ng-template pTemplate="caption">
    <div class="table-header d-flex">
      <div class="d-flex">
        <div>Opportunity Listing</div>
        <div class="ml-2 mt-1">
          <a routerLink="/opportunity/new" routerLinkActive="router-link-active"
            ><i class="icon-plus icons" style="color: #ffffff"></i
          ></a>
        </div>
      </div>
      <div class="p-input-icon-left">
        <i class="pi pi-search"></i>
        <input
          type="text"
          pInputText
          placeholder="Global Search"
          [(ngModel)]="search_text"
        />
      </div>
    </div>
  </ng-template>
  <ng-template pTemplate="header">
    <tr>
      <th pSortableColumn="created_date" class="text-center">
        <div
          style="display: flex; flex-direction: column; align-items: center"
          class="p-d-flex p-jc-between p-ai-center"
        >
          Created Date
          <div
            style="
              display: flex;

              align-items: center;
            "
          >
            <p-sortIcon field="created_date"></p-sortIcon>
            <p-columnFilter
              type="date"
              field="created_date"
              display="menu"
              class="p-ml-auto"
            ></p-columnFilter>
          </div>
        </div>
      </th>
      <th pSortableColumn="op_id" class="text-center">
        <div
          style="
            width: 100%;
            white-space: nowrap;
            display: flex;
            flex-direction: column;
            align-items: center;
          "
          class="p-d-flex p-jc-between p-ai-center"
        >
          Opportunity ID
          <div
            style="
              display: flex;
              flex-direction: row;
              justify-content: space-between;
              align-items: center;
            "
          >
            <p-sortIcon field="op_id"></p-sortIcon>
            <p-columnFilter
              type="text"
              field="op_id"
              display="menu"
              class="p-ml-auto"
            ></p-columnFilter>
          </div>
        </div>
      </th>
      <th pSortableColumn="topic" class="text-center">
        <div
          style="
            width: 100%;
            white-space: nowrap;
            display: flex;
            flex-direction: column;
            align-items: center;
          "
          class="p-d-flex p-jc-between p-ai-center"
        >
          Topic
          <div
            style="
              display: flex;
              flex-direction: row;
              justify-content: space-between;
              align-items: center;
            "
          >
            <p-sortIcon field="topic"></p-sortIcon>
            <p-columnFilter
              type="text"
              field="topic"
              display="menu"
              class="p-ml-auto"
            ></p-columnFilter>
          </div>
        </div>
      </th>
      <th pSortableColumn="company" class="text-center">
        <div
          style="
            width: 100%;
            white-space: nowrap;
            display: flex;
            flex-direction: column;
            align-items: center;
          "
          class="p-d-flex p-jc-between p-ai-center"
        >
          Company Name
          <div
            style="
              display: flex;
              flex-direction: row;
              justify-content: space-between;
              align-items: center;
            "
          >
            <p-sortIcon field="company"></p-sortIcon>
            <p-columnFilter
              type="text"
              field="company"
              display="menu"
              class="p-ml-auto"
            ></p-columnFilter>
          </div>
        </div>
      </th>
      <th pSortableColumn="status_id" class="text-center">
        <div
          style="
            width: 100%;
            white-space: nowrap;
            display: flex;
            flex-direction: column;
            align-items: center;
          "
          class="p-d-flex p-jc-between p-ai-center"
        >
          Status
          <div
            style="
              display: flex;
              flex-direction: row;
              justify-content: space-between;
              align-items: center;
            "
          >
            <p-sortIcon field="status"></p-sortIcon>
            <p-columnFilter
              type="text"
              field="status"
              display="menu"
              class="p-ml-auto"
            ></p-columnFilter>
          </div>
        </div>
      </th>
      <th pSortableColumn="amount" class="text-center">
        <div
          style="
            width: 100%;
            white-space: nowrap;
            display: flex;
            flex-direction: column;
            align-items: center;
          "
          class="p-d-flex p-jc-between p-ai-center"
        >
          Amount (MYR)
          <div
            style="
              display: flex;
              flex-direction: row;
              justify-content: space-between;
              align-items: center;
            "
          >
            <p-sortIcon field="est_value"></p-sortIcon>
            <p-columnFilter
              type="numeric"
              field="est_value"
              display="menu"
              class="p-ml-auto"
            ></p-columnFilter>
          </div>
        </div>
      </th>

      <th [style]="{ width: '5%' }"></th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-opportunity>
    <tr class="p-selectable-row">
      <td class="text-center">
        <span class="p-column-title">Created Date</span>
        {{ opportunity.created_date | date: "dd-MMM-yyyy" }}
      </td>
      <td class="text-center">
        <span class="p-column-title">Opportunity Code</span>
        {{ opportunity.op_id }}
      </td>
      <td class="text-center">
        <span class="p-column-title">Topic</span>
        {{ opportunity.topic }}
      </td>
      <td class="text-center">
        <span class="p-column-title">Company Name</span>
        {{ opportunity.company }}
      </td>
      <td class="text-center">
        <span class="p-column-title">Status</span>
        {{ opportunity.status }}
      </td>
      <td class="text-center">
        <!-- | currency: "MYR" -->
        <span class="p-column-title">Amount (MYR)</span>
        {{ opportunity.est_value }}
      </td>
      <td>
        <div class="row-icon">
          <a [routerLink]="['/opportunity/edit/', opportunity.id]"
            ><i class="icon-note icon"></i
          ></a>
          <i class="pi pi-copy copy-icon"></i>
        </div>

        <!-- <div> -->
        <!-- <i class="pi pi-copy copy-icon"></i> -->
        <!-- </div> -->
      </td>
      <!-- <td><i class="pi pi-copy"></i></td> -->
    </tr>
  </ng-template>
  <ng-template pTemplate="emptymessage" let-columns>
    <tr>
      <td style="text-align: center" [attr.colspan]="columns.length">
        No records found
      </td>
    </tr>
  </ng-template>
</p-table>
<p-paginator
  (onPageChange)="pagination($event)"
  [rows]="pageItems"
  [totalRecords]="totalRecords"
  [rowsPerPageOptions]="[10, 25, 50, { showAll: 'All' }]"
>
</p-paginator>
