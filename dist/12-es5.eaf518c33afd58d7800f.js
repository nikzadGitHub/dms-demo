!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{LFMZ:function(e,n,a){"use strict";a.r(n),a.d(n,"FpsModule",function(){return $t});var r,i,d,s=a("SVse"),l=a("Wcfd"),b=a("rVqu"),c=a("LqlI"),p=a("s7LF"),u=a("jMqV"),m=a("ZRSf"),f=a("iInd"),_=a("tUjy"),g=a("hLZb"),h=a("EE25"),y=a("IheW"),v=a("AytR"),V=a("8Y7J"),W=((r=function(){function e(o){t(this,e),this.httpClient=o,this.apiURL=v.b.apiBaseUrl,this.httpOptions={headers:new y.e({"Content-Type":"application/json"})}}return o(e,[{key:"getQuery",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=t;return null!=e&&(o+="?page_items="+e),this.httpClient.get(this.apiURL+o,this.httpOptions)}},{key:"postQuery",value:function(t,e){return this.httpClient.post(this.apiURL+t,JSON.stringify(e),this.httpOptions)}}]),e}()).\u0275fac=function(t){return new(t||r)(V.dc(y.b))},r.\u0275prov=V.Mb({token:r,factory:r.\u0275fac}),r),C=a("Hva9"),M=((d=function(){function e(o){t(this,e),this.httpClient=o}return o(e,[{key:"getFinancialInstition",value:function(t){return this.httpClient.get(C.a.apiBaseUrl+"/institutions-list/"+t).pipe()}},{key:"getSkuAutoGeneratedKey",value:function(){return this.httpClient.get(C.a.apiBaseUrl+"/get-last-fps-sku-id").pipe()}},{key:"getFPSAutoGeneratedKey",value:function(){return this.httpClient.get(C.a.apiBaseUrl+"/get-last-fps-id").pipe()}}]),e}()).\u0275fac=function(t){return new(t||d)(V.dc(y.b))},d.\u0275prov=V.Mb({token:d,factory:d.\u0275fac,providedIn:"root"}),d),k=((i=function(){function e(o){t(this,e),this.httpClient=o}return o(e,[{key:"getCurrencyList",value:function(t){return this.httpClient.get(C.a.apiBaseUrl+"/currencies-list/?countryCode="+t).pipe()}},{key:"getCountryCodeFromCurrency",value:function(t){return this.httpClient.get(C.a.apiBaseUrl+"/convert-currency-to-country/?currency_code="+t).pipe()}}]),e}()).\u0275fac=function(t){return new(t||i)(V.dc(y.b))},i.\u0275prov=V.Mb({token:i,factory:i.\u0275fac,providedIn:"root"}),i),P=a("y1st");function F(t,e){if(1&t&&(V.Wb(0,"div"),V.Rb(1,"span",1),V.Wb(2,"span",2),V.Qc(3,"(error)"),V.Vb(),V.Wb(4,"div",3),V.Qc(5),V.Vb(),V.Vb()),2&t){var o=V.kc();V.Db(5),V.Sc(" ",o.errorMsg," ")}}var O,w=((O=function(){function e(){t(this,e)}return o(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(t){return new(t||O)},O.\u0275cmp=V.Kb({type:O,selectors:[["app-form-error-presentation"]],inputs:{errorMsg:"errorMsg",displayError:"displayError"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"glyphicon","glyphicon-remove","form-control-feedback","fix-error-icon"],[1,"sr-only"],[1,"error-msg"]],template:function(t,e){1&t&&V.Oc(0,F,6,1,"div",0),2&t&&V.rc("ngIf",e.displayError)},directives:[s.p],styles:[".error-msg[_ngcontent-%COMP%]{color:#ff1814}.fix-error-icon[_ngcontent-%COMP%]{top:27px}"]}),O),R=["successModal"],Q=["dangerModal"],S=["foundModal"],D=["fpsAddFormContainer"];function A(t,e){if(1&t){var o=V.Xb();V.Wb(0,"tr",80),V.Wb(1,"td",81),V.Rb(2,"input",82),V.Vb(),V.Wb(3,"td",81),V.Rb(4,"input",83),V.Vb(),V.Wb(5,"td",84),V.Rb(6,"p-dropdown",85),V.Vb(),V.Wb(7,"td",81),V.Rb(8,"input",86),V.Vb(),V.Wb(9,"td",87),V.Rb(10,"i",88),V.Qc(11," \xa0 "),V.Wb(12,"i",89),V.gc("click",function(){V.Fc(o);var t=e.index;return V.kc(2).removeAddMinProcedure(t)}),V.Vb(),V.Vb(),V.Vb()}if(2&t){var n=e.index,a=V.kc(2);V.rc("formGroupName",n),V.Db(6),V.rc("options",a.fps_user_list)}}function x(t,e){if(1&t){var o=V.Xb();V.Wb(0,"div",7),V.Wb(1,"div",26),V.Wb(2,"div",70),V.Wb(3,"h2"),V.Qc(4,"Procedure Usage "),V.Vb(),V.Vb(),V.Wb(5,"div",71),V.Wb(6,"label",72),V.Qc(7," Minimum Procedure "),V.Vb(),V.Vb(),V.Wb(8,"div",11),V.Rb(9,"input",73),V.Vb(),V.Vb(),V.Wb(10,"div",54),V.Wb(11,"form",74),V.Wb(12,"div",2),V.Wb(13,"table",75),V.Wb(14,"thead"),V.Wb(15,"tr"),V.Wb(16,"th"),V.Qc(17,"Date"),V.Vb(),V.Wb(18,"th"),V.Qc(19,"No. Of Procedure"),V.Vb(),V.Wb(20,"th"),V.Qc(21,"Updated By"),V.Vb(),V.Wb(22,"th"),V.Qc(23,"Updated On"),V.Vb(),V.Rb(24,"th"),V.Vb(),V.Vb(),V.Wb(25,"tbody"),V.Oc(26,A,13,2,"tr",76),V.Vb(),V.Wb(27,"tfoot",77),V.Wb(28,"tr"),V.Wb(29,"td",78),V.Wb(30,"i",79),V.gc("click",function(){return V.Fc(o),V.kc().addAddMinProcedure()}),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb()}if(2&t){var n=V.kc();V.Db(9),V.rc("readonly",!0),V.Db(2),V.rc("formGroup",n.minProcedureAddForm),V.Db(15),V.rc("ngForOf",n.addMinProcedure().controls)}}function E(t,e){if(1&t){var o=V.Xb();V.Wb(0,"tr",80),V.Wb(1,"td",81),V.Rb(2,"input",82),V.Vb(),V.Wb(3,"td",81),V.Rb(4,"input",92),V.Vb(),V.Wb(5,"td",84),V.Rb(6,"p-dropdown",85),V.Vb(),V.Wb(7,"td",81),V.Rb(8,"input",86),V.Vb(),V.Wb(9,"td",87),V.Wb(10,"a",93),V.Rb(11,"i",88),V.Vb(),V.Qc(12," \xa0 "),V.Wb(13,"a",94),V.gc("click",function(){V.Fc(o);var t=e.index;return V.kc(2).removeAddMinUsage(t)}),V.Rb(14,"i",95),V.Vb(),V.Vb(),V.Vb()}if(2&t){var n=e.index,a=V.kc(2);V.rc("formGroupName",n),V.Db(6),V.rc("options",a.fps_user_list)}}function N(t,e){if(1&t){var o=V.Xb();V.Wb(0,"div",7),V.Wb(1,"div",26),V.Wb(2,"div",70),V.Wb(3,"h2"),V.Qc(4,"Consumable Usage "),V.Vb(),V.Vb(),V.Wb(5,"div",71),V.Wb(6,"label",72),V.Qc(7," Minimum Usage "),V.Vb(),V.Vb(),V.Wb(8,"div",11),V.Rb(9,"input",90),V.Vb(),V.Vb(),V.Wb(10,"div",54),V.Wb(11,"form",74),V.Wb(12,"div",2),V.Wb(13,"table",91),V.Wb(14,"thead"),V.Wb(15,"tr"),V.Wb(16,"th"),V.Qc(17,"Date"),V.Vb(),V.Wb(18,"th"),V.Qc(19,"Usage"),V.Vb(),V.Wb(20,"th"),V.Qc(21,"Updated By"),V.Vb(),V.Wb(22,"th"),V.Qc(23,"Updated On"),V.Vb(),V.Rb(24,"th"),V.Vb(),V.Vb(),V.Wb(25,"tbody"),V.Oc(26,E,15,2,"tr",76),V.Vb(),V.Wb(27,"tfoot",77),V.Wb(28,"tr"),V.Wb(29,"td",78),V.Wb(30,"i",79),V.gc("click",function(){return V.Fc(o),V.kc().addAddMinUsage()}),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb()}if(2&t){var n=V.kc();V.Db(9),V.rc("readonly",!0),V.Db(2),V.rc("formGroup",n.minUsageAddForm),V.Db(15),V.rc("ngForOf",n.addMinUsage().controls)}}var q,U,L=((q=function(){function e(o,n,a,r,i,d,s,l,b){t(this,e),this.fb=o,this.fpsService=n,this.appService=a,this.institutionService=r,this.zone=i,this.dialogService=d,this.activatedRoute=s,this.currencyService=l,this.router=b,this.agreement_mandatory=!1,this.payment_frequency_list=[{value:"monthly_payment",label:"Monthly"},{value:"quarterly_payment",label:"Quarterly"},{value:"half_yearly_payment",label:"Half-yearly"}],this.tenure_list=[],this.countryCode=null,this.has_consumable_usage=!1,this.has_min_procedure=!1,this.oppt_details={opportunity_code:"",created_at:"",currency_code:"",amount:"",customer:""},this.fpsTypeList=this.fpsService.getTransSactionTypeList(),this.fpsStatusList=this.fpsService.getFpsStatusList()}return o(e,[{key:"form_controls",get:function(){return this.fpsAddForm.controls}},{key:"ngOnInit",value:function(){var t=this;this.fpsAddForm=this.fb.group({fps_no:new p.f("",[p.y.required]),fps_opportunity_id:new p.f,fps_quote_id:new p.f,fps_customer_name:new p.f,fps_soci_uuid:new p.f,fps_transaction_type_id:new p.f(1,[p.y.min(1)]),fps_financier_id:new p.f("",[p.y.required,p.y.min(1)]),fps_payment_frequency:new p.f("",[p.y.required]),fps_status_id:new p.f(1,[p.y.min(1)]),fps_tenure_id:new p.f("",[p.y.required]),fps_adv_payment:new p.f(0),fps_adv_payment_percentage:new p.f(0),fps_net_financing_amount:new p.f(0),fps_monthly_payment_amount:new p.f,fps_interest_rate:new p.f,fps_validated_by:new p.f,fps_approved_by:new p.f,fps_leas_aggr_no:new p.f(0),fps_internal_aggr_no:new p.f,fps_remarks:new p.f,fps_currency_code:new p.f,fps_total_financial_amount:new p.f,fps_min_payment_amount:new p.f,fps_required_docs:new p.f,fps_data_area_id:new p.f,fps_consumable_usage:new p.f,fps_min_procedure:new p.f}),this.minProcedureAddForm=this.fb.group({addMinProcedure:this.fb.array([])}),this.minUsageAddForm=this.fb.group({addMinUsage:this.fb.array([])}),this.activatedRoute.queryParams.subscribe(function(e){t.current_apportunity_id=e.opport_id,t.current_quot_id=e.quot_id,t.fpsAddForm.controls.fps_quote_id.setValue(t.current_quot_id),t.fpsAddForm.controls.fps_opportunity_id.setValue(t.current_apportunity_id)}),this.appService.getQuery("/opportunity/detail/"+this.current_apportunity_id,null).subscribe(function(e){t.oppt_details=e.data,t.fpsAddForm.controls.fps_currency_code.setValue(t.oppt_details.currency_code),t.fpsAddForm.controls.fps_total_financial_amount.setValue(t.oppt_details.amount),t.fpsAddForm.controls.fps_data_area_id.setValue(t.oppt_details.customer.data_area_id),t.currencyService.getCountryCodeFromCurrency(t.oppt_details.currency_code).subscribe({next:function(e){e.success&&t.zone.run(function(){t.countryCode=e.data.iso3})}})}),this.fpsService.getUsersList().subscribe(function(e){t.fps_user_list=e.data}),this.institutionService.getFPSAutoGeneratedKey().subscribe({next:function(e){e.success?t.zone.run(function(){t.fpsAddForm.controls.fps_no.setValue("FPS"+(e.data[0].id+1)+"-"+t.oppt_details.opportunity_code)}):t.dialogService.showErrorDialog(e.message)},error:function(e){t.dialogService.showErrorDialog(null!=e.error.message?e.error.message:"Error retrieve institutions list")}})}},{key:"onSave",value:function(){var t=this;if(!this.fpsAddForm.valid)return this.fpsService.validateAllFormFields(this.fpsAddForm),void this.fpsAddFormContainerRef.nativeElement.scrollIntoView({behavior:"smooth"});this.fpsService.saveFps({fps_no:this.fpsAddForm.get("fps_no").value+"",fps_opportunity_id:this.fpsAddForm.get("fps_opportunity_id").value+"",fps_quote_id:this.fpsAddForm.get("fps_quote_id").value+"",fps_transaction_type_id:this.fpsAddForm.get("fps_transaction_type_id").value+"",fps_payment_frequency:this.fpsAddForm.get("fps_payment_frequency").value+"",fps_financier_id:this.fpsAddForm.get("fps_financier_id").value+"",fps_adv_payment:this.fpsAddForm.get("fps_adv_payment").value+"",fps_adv_payment_percentage:this.fpsAddForm.get("fps_adv_payment_percentage").value+"",fps_total_financial_amount:this.fpsAddForm.get("fps_total_financial_amount").value+"",fps_net_financing_amount:this.fpsAddForm.get("fps_net_financing_amount").value+"",fps_monthly_payment_amount:this.fpsAddForm.get("fps_monthly_payment_amount").value+"",fps_tenure_id:this.fpsAddForm.get("fps_tenure_id").value+"",fps_interest_rate:this.fpsAddForm.get("fps_interest_rate").value+"",fps_status_id:this.fpsAddForm.get("fps_status_id").value+"",fps_validated_by:this.fpsAddForm.get("fps_validated_by").value,fps_approved_by:this.fpsAddForm.get("fps_approved_by").value,fps_leas_aggr_no:this.fpsAddForm.get("fps_leas_aggr_no").value+"",fps_remarks:this.fpsAddForm.get("fps_remarks").value+"",fps_required_docs:this.fpsAddForm.get("fps_required_docs").value+"",fps_customer_name:this.oppt_details.customer.owner+"",fps_internal_aggr_no:"",fps_data_area_id:this.fpsAddForm.get("fps_data_area_id").value+""}).subscribe(function(e){if(e.id){for(var o=t.minProcedureAddForm.value.addMinProcedure,n=[],a=0;a<o.length;a++)n.push({id:null,fps_id:e.id,date:o[a].date,no_procedure:o[a].no_procedure,updated_by:o[a].updated_by,updated_on:o[a].updated_on});n.length>0&&t.fpsService.storeMinProcedure(n);for(var r=t.minUsageAddForm.value.addMinUsage,i=[],d=0;d<r.length;d++)i.push({id:null,fps_id:e.id,date:r[d].date,usage:r[d].usage,updated_by:r[d].updated_by,updated_on:r[d].updated_on});i.length>0&&t.fpsService.storeMinUsage(i),t.alertBody="FPS saved successfully.",t.successModal.show(),setTimeout(function(){t.successModal.hide(),t.router.navigateByUrl("/fps/fps-listing",{replaceUrl:!0})},2e3)}},function(e){console.log(e),t.alertBody="The FPS can't save",t.dangerModal.show(),setTimeout(function(){t.dangerModal.hide()},2e3)})}},{key:"onChangeAdvancePayment",value:function(){var t=this.fpsAddForm.controls.fps_total_financial_amount.value,e=t/100*this.fpsAddForm.controls.fps_adv_payment_percentage.value;this.fpsAddForm.controls.fps_adv_payment.setValue(e),this.fpsAddForm.controls.fps_net_financing_amount.setValue(t-e)}},{key:"updateInterestRate",value:function(){var t,e=this.getFilteredCodes(this.tenure_list,"id",this.fpsAddForm.controls.fps_tenure_id.value);this.fpsAddForm.controls.fps_adv_payment.setValidators([p.y.min(e[0].min_payment_amount)]),this.fpsAddForm.controls.fps_interest_rate.setValue(e[0].details_interest_rate),this.fpsAddForm.controls.fps_adv_payment.setValue(e[0].min_payment_amount),this.fpsAddForm.controls.fps_min_payment_amount.setValue(e[0].min_payment_amount),this.fpsAddForm.controls.fps_required_docs.setValue(null!==(t=e[0].required_docs)&&void 0!==t?t:""),this.fpsAddForm.controls.fps_consumable_usage.setValue(e[0].consumable_usage),this.fpsAddForm.controls.fps_min_procedure.setValue(e[0].min_procedure),this.has_consumable_usage=e[0].consumable_usage>0,this.has_min_procedure=e[0].min_procedure>0,this.agreement_mandatory=0!=e[0].agreement_mandatory,this.updateMontlyPayment()}},{key:"updateMontlyPayment",value:function(){var t=parseFloat(this.fpsAddForm.controls.fps_total_financial_amount.value),e=parseFloat(this.fpsAddForm.controls.fps_interest_rate.value),o=parseFloat(this.fpsAddForm.controls.fps_tenure_id.value);this.fpsAddForm.controls.fps_monthly_payment_amount.setValue((t*(1+e/12*o)/o).toFixed(2))}},{key:"updateTenure",value:function(){var t=this;this.loadFinancialInstitutions();var e=this.fpsAddForm.controls.fps_financier_id.value,o=this.fpsAddForm.controls.fps_payment_frequency.value,n=this.fpsAddForm.controls.fps_transaction_type_id.value;n&&e&&o&&this.fpsService.getTenureList(n,e,o).subscribe(function(e){e.unshift(e.length>0?{id:"",details_tenure:"Select Tenure"}:{id:"",details_tenure:"No Tenure Available"}),t.tenure_list=e},function(t){console.log(t)})}},{key:"loadFinancialInstitutions",value:function(){var t=this;this.institutionService.getFinancialInstition(this.countryCode).subscribe({next:function(e){e.success?t.zone.run(function(){t.institutions_list=e.data.institutions}):t.dialogService.showErrorDialog(e.message)},error:function(e){t.dialogService.showErrorDialog(null!=e.error.message?e.error.message:"Error retrieve institutions list")}})}},{key:"getFilteredCodes",value:function(t,e,o){return t.filter(function(t){return t[e]==o})}},{key:"isFieldValid",value:function(t){return!this.fpsAddForm.get(t).valid&&this.fpsAddForm.get(t).touched}},{key:"addMinProcedure",value:function(){return this.minProcedureAddForm.get("addMinProcedure")}},{key:"newMinProcedure",value:function(){return this.fb.group({date:"",no_procedure:12,updated_by:1,updated_on:""})}},{key:"addAddMinProcedure",value:function(){this.addMinProcedure().push(this.newMinProcedure())}},{key:"removeAddMinProcedure",value:function(t){this.addMinProcedure().removeAt(t)}},{key:"addMinUsage",value:function(){return this.minUsageAddForm.get("addMinUsage")}},{key:"newMinUsage",value:function(){return this.fb.group({date:"",usage:12,updated_by:1,updated_on:""})}},{key:"addAddMinUsage",value:function(){this.addMinUsage().push(this.newMinUsage())}},{key:"removeAddMinUsage",value:function(t){this.addMinUsage().removeAt(t)}}]),e}()).\u0275fac=function(t){return new(t||q)(V.Qb(p.e),V.Qb(h.a),V.Qb(W),V.Qb(M),V.Qb(V.A),V.Qb(g.a),V.Qb(f.a),V.Qb(k),V.Qb(f.c))},q.\u0275cmp=V.Kb({type:q,selectors:[["app-create"]],viewQuery:function(t,e){var o;1&t&&(V.Vc(R,1),V.Vc(Q,1),V.Vc(S,1),V.Vc(D,1)),2&t&&(V.Cc(o=V.hc())&&(e.successModal=o.first),V.Cc(o=V.hc())&&(e.dangerModal=o.first),V.Cc(o=V.hc())&&(e.foundModal=o.first),V.Cc(o=V.hc())&&(e.fpsAddFormContainerRef=o.first))},features:[V.Cb([W])],decls:201,vars:26,consts:[[1,"animated","fadeIn"],["id","fpsAddForm",1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-sm-12","col-md-12"],[1,"card"],[1,"card-header","d-flex","b-btm-green"],[1,"chead"],[1,"card-body"],[1,"card-row"],[1,"lead-data"],[1,"lead-header"],[1,"col-md-3"],[1,"form-group"],[1,"bold"],[1,"col-md-3","lead-id"],[1,"bg-opp","text-white","p-1"],["type","hidden","formControlName","fps_no",1,"form-control"],["formControlName","fps_transaction_type_id","optionLabel","title","optionValue","id","styleClass","form-control","emptyMessage","No FPS Type Available",3,"options","onChange"],["formControlName","fps_status_id","optionLabel","title","optionValue","id","styleClass","form-control","emptyMessage","No FPS Status Available",3,"options"],[1,"details","grey"],["type","hidden","formControlName","fps_opportunity_id",1,"form-control"],["type","hidden","formControlName","fps_data_area_id","title","fps_data_area_id",1,"form-control"],["type","hidden","formControlName","fps_quote_id",1,"form-control"],["fpsAddFormContainer",""],[1,"col-md-12"],[1,"mb-4"],[1,"form-group","row"],["for","booking-reason",1,"col-md-2","col-form-label"],[1,"asterisk"],[1,"col-md-4"],["formControlName","fps_payment_frequency","optionLabel","label","optionValue","value","styleClass","form-control","placeholder","Select Frequency","id","fps_payment_frequency","emptyMessage","No Payment Frequency Available",3,"options","onChange"],["errorMsg","Payment Frequency is required.",3,"displayError"],["formControlName","fps_tenure_id","id","fps_tenure_id","optionLabel","details_tenure","optionValue","id","styleClass","form-control",3,"options","onChange"],["errorMsg","Tenure is required.",3,"displayError"],["formControlName","fps_financier_id","id","fps_financier_id","optionLabel","title","optionValue","id","styleClass","form-control","placeholder","Select Institution","emptyMessage","No Institution Available",3,"options","onChange"],["errorMsg","Financial Instititue is required.",3,"displayError"],["type","number","step","0.1","formControlName","fps_interest_rate",1,"form-control",3,"change"],["type","text","formControlName","fps_currency_code",1,"form-control",3,"readonly"],["type","number","formControlName","fps_monthly_payment_amount",1,"form-control"],["type","number","formControlName","fps_total_financial_amount",1,"form-control"],["type","number","formControlName","fps_min_payment_amount",1,"form-control"],[1,"col-md-6"],["for","booking-reason",1,"col-md-4","col-form-label"],[1,"col-md-8"],["type","number","step","0.1","formControlName","fps_adv_payment_percentage",1,"form-control",3,"change"],["type","number","formControlName","fps_adv_payment","id","fps_adv_payment",1,"form-control"],["errorMsg","Advance Pyament can't be less than Minimum payment.",3,"displayError"],["type","number","formControlName","fps_net_financing_amount",1,"form-control"],["formControlName","fps_remarks","rows","9",1,"form-control"],["formControlName","fps_validated_by","optionLabel","full_name","optionValue","id","styleClass","form-control","placeholder","Select User","emptyMessage","No User Available",3,"options"],["type","text","formControlName","fps_leas_aggr_no",1,"form-control",3,"readonly"],["formControlName","fps_approved_by","optionLabel","full_name","optionValue","id","styleClass","form-control","placeholder","Select User","emptyMessage","No User Available",3,"options"],["formControlName","fps_required_docs","rows","9",1,"form-control"],["class","card-body",4,"ngIf"],[1,"col-sm-12","col-md-12","form-group"],[1,"custom-footer","d-flex","justify-content-center"],["type","button",1,"btn","btn-light"],["type","button",1,"btn","btn-sm","btn-light"],["type","submit","form","fpsAddForm",1,"btn","btn-sm","btn-primary"],["id","success","bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["successModal","bs-modal"],["role","document",1,"modal-dialog","modal-success"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["dangerModal","bs-modal"],["role","document",1,"modal-dialog","modal-danger"],[1,"modal-footer"],[1,"col-md-7"],[1,"col-md-2"],["for","booking-reason",1,"col-form-label"],["type","text","formControlName","fps_min_procedure",1,"form-control",3,"readonly"],[3,"formGroup"],["formArrayName","addMinProcedure",1,"table","table-striped"],["align","center",3,"formGroupName",4,"ngFor","ngForOf"],["align","center"],["colspan","9","align","center",1,"td-actions"],[1,"icon-plus","icons",3,"click"],["align","center",3,"formGroupName"],[2,"width","15%"],["formControlName","date","type","date",1,"form-control"],["formControlName","no_procedure","size","1","type","number",1,"form-control"],[2,"width","10%"],["formControlName","updated_by","optionLabel","full_name","optionValue","id","styleClass","form-control","placeholder","Select User","emptyMessage","No User Available",3,"options"],["formControlName","updated_on","type","date",1,"form-control"],[1,"td-actions",2,"width","10%"],[1,"fa","fa-edit"],[1,"fa","fa-trash",3,"click"],["type","text","formControlName","fps_consumable_usage",1,"form-control",3,"readonly"],["formArrayName","addMinUsage",1,"table","table-striped"],["formControlName","usage","size","1","type","number",1,"form-control"],["routerLinkActive","router-link-active",3,"routerLink"],["routerLinkActive","router-link-active",3,"routerLink","click"],[1,"fa","fa-trash"]],template:function(t,e){1&t&&(V.Wb(0,"div",0),V.Wb(1,"form",1),V.gc("ngSubmit",function(){return e.onSave()}),V.Wb(2,"div",2),V.Wb(3,"div",3),V.Wb(4,"div",4),V.Wb(5,"div",5),V.Wb(6,"div",6),V.Qc(7,"Create FPS Request Form"),V.Vb(),V.Vb(),V.Wb(8,"div",7),V.Wb(9,"div",8),V.Wb(10,"div",9),V.Wb(11,"div",10),V.Wb(12,"div",2),V.Wb(13,"div",11),V.Wb(14,"div",12),V.Wb(15,"h3",13),V.Qc(16),V.Vb(),V.Vb(),V.Vb(),V.Wb(17,"div",14),V.Wb(18,"div",12),V.Wb(19,"label",13),V.Qc(20,"FPS Request No."),V.Vb(),V.Wb(21,"div",15),V.Qc(22),V.Vb(),V.Wb(23,"span"),V.Rb(24,"input",16),V.Vb(),V.Vb(),V.Vb(),V.Wb(25,"div",11),V.Wb(26,"div",12),V.Wb(27,"label",13),V.Qc(28,"Transaction Type"),V.Vb(),V.Wb(29,"p-dropdown",17),V.gc("onChange",function(){return e.updateTenure()}),V.Vb(),V.Vb(),V.Vb(),V.Wb(30,"div",11),V.Wb(31,"div",12),V.Wb(32,"label",13),V.Qc(33,"Status"),V.Vb(),V.Rb(34,"p-dropdown",18),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Wb(35,"div",19),V.Wb(36,"div",2),V.Wb(37,"div",11),V.Wb(38,"div",12),V.Wb(39,"label",13),V.Qc(40,"Created Date"),V.Vb(),V.Wb(41,"div"),V.Qc(42),V.lc(43,"date"),V.Vb(),V.Vb(),V.Vb(),V.Wb(44,"div",11),V.Wb(45,"div",12),V.Wb(46,"label",13),V.Qc(47,"Opportunity ID "),V.Vb(),V.Wb(48,"div"),V.Qc(49),V.Rb(50,"input",20),V.Rb(51,"input",21),V.Vb(),V.Vb(),V.Vb(),V.Wb(52,"div",11),V.Wb(53,"div",12),V.Wb(54,"label",13),V.Qc(55,"Quote ID (Version)"),V.Vb(),V.Wb(56,"div"),V.Qc(57),V.Rb(58,"input",22),V.Vb(),V.Vb(),V.Vb(),V.Wb(59,"div",11),V.Wb(60,"div",12),V.Wb(61,"label",13),V.Qc(62,"SOCI No."),V.Vb(),V.Wb(63,"div"),V.Qc(64," ... "),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Wb(65,"div",2,23),V.Wb(67,"div",24),V.Wb(68,"div",4),V.Wb(69,"div",7),V.Wb(70,"div",25),V.Wb(71,"h2"),V.Qc(72,"General"),V.Vb(),V.Vb(),V.Wb(73,"div",26),V.Wb(74,"label",27),V.Qc(75," Payment Frequency"),V.Wb(76,"span",28),V.Qc(77," * "),V.Vb(),V.Vb(),V.Wb(78,"div",29),V.Wb(79,"p-dropdown",30),V.gc("onChange",function(){return e.updateTenure()}),V.Vb(),V.Rb(80,"app-form-error-presentation",31),V.Vb(),V.Wb(81,"label",27),V.Qc(82," Tenure "),V.Vb(),V.Wb(83,"div",29),V.Wb(84,"p-dropdown",32),V.gc("onChange",function(){return e.updateInterestRate()}),V.Vb(),V.Rb(85,"app-form-error-presentation",33),V.Vb(),V.Vb(),V.Wb(86,"div",26),V.Wb(87,"label",27),V.Qc(88," Financial Instititue"),V.Wb(89,"span",28),V.Qc(90," * "),V.Vb(),V.Vb(),V.Wb(91,"div",29),V.Wb(92,"p-dropdown",34),V.gc("onChange",function(){return e.updateTenure()}),V.Vb(),V.Rb(93,"app-form-error-presentation",35),V.Vb(),V.Wb(94,"label",27),V.Qc(95," Interest % "),V.Vb(),V.Wb(96,"div",29),V.Wb(97,"input",36),V.gc("change",function(){return e.updateMontlyPayment()}),V.Vb(),V.Vb(),V.Vb(),V.Wb(98,"div",26),V.Wb(99,"label",27),V.Qc(100," Currency"),V.Wb(101,"span",28),V.Qc(102," * "),V.Vb(),V.Vb(),V.Wb(103,"div",29),V.Rb(104,"input",37),V.Vb(),V.Wb(105,"label",27),V.Qc(106," Monthly Payment Amount "),V.Vb(),V.Wb(107,"div",29),V.Rb(108,"input",38),V.Vb(),V.Vb(),V.Wb(109,"div",26),V.Wb(110,"label",27),V.Qc(111," Total Financial Amount"),V.Wb(112,"span",28),V.Qc(113," * "),V.Vb(),V.Vb(),V.Wb(114,"div",29),V.Rb(115,"input",39),V.Vb(),V.Wb(116,"label",27),V.Qc(117," Min Payment Amount "),V.Vb(),V.Wb(118,"div",29),V.Rb(119,"input",40),V.Vb(),V.Vb(),V.Wb(120,"div",26),V.Wb(121,"div",41),V.Wb(122,"div",26),V.Wb(123,"label",42),V.Qc(124," Advance Payment (%) "),V.Vb(),V.Wb(125,"div",43),V.Wb(126,"input",44),V.gc("change",function(){return e.onChangeAdvancePayment()}),V.Vb(),V.Vb(),V.Vb(),V.Wb(127,"div",26),V.Wb(128,"label",42),V.Qc(129," Advance Payment "),V.Vb(),V.Wb(130,"div",43),V.Rb(131,"input",45),V.Rb(132,"app-form-error-presentation",46),V.Vb(),V.Vb(),V.Wb(133,"div",26),V.Wb(134,"label",42),V.Qc(135," Net Financing Amount "),V.Vb(),V.Wb(136,"div",43),V.Rb(137,"input",47),V.Vb(),V.Vb(),V.Vb(),V.Wb(138,"div",41),V.Wb(139,"div",26),V.Wb(140,"label",42),V.Qc(141," Remark "),V.Vb(),V.Wb(142,"div",43),V.Rb(143,"textarea",48),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Rb(144,"hr"),V.Wb(145,"div",26),V.Wb(146,"label",27),V.Qc(147," Validated By "),V.Vb(),V.Wb(148,"div",29),V.Rb(149,"p-dropdown",49),V.Vb(),V.Wb(150,"label",27),V.Qc(151," Argeement No. "),V.Vb(),V.Wb(152,"div",29),V.Rb(153,"input",50),V.Vb(),V.Vb(),V.Wb(154,"div",26),V.Wb(155,"div",41),V.Wb(156,"div",26),V.Wb(157,"label",42),V.Qc(158," Approved By "),V.Vb(),V.Wb(159,"div",43),V.Rb(160,"p-dropdown",51),V.Vb(),V.Vb(),V.Vb(),V.Wb(161,"div",41),V.Wb(162,"div",26),V.Wb(163,"label",42),V.Qc(164," Required Documents "),V.Vb(),V.Wb(165,"div",43),V.Rb(166,"textarea",52),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Rb(167,"hr"),V.Oc(168,x,31,3,"div",53),V.Oc(169,N,31,3,"div",53),V.Wb(170,"div",54),V.Wb(171,"div",55),V.Wb(172,"button",56),V.Qc(173," Submit for Approval"),V.Vb(),V.Wb(174,"button",56),V.Qc(175," Standard Library"),V.Vb(),V.Wb(176,"button",57),V.Qc(177," CANCEL"),V.Vb(),V.Wb(178,"button",58),V.Qc(179,"Save"),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Wb(180,"div",59,60),V.Wb(182,"div",61),V.Wb(183,"div",62),V.Wb(184,"div",63),V.Wb(185,"h4",64),V.Qc(186,"Success"),V.Vb(),V.Vb(),V.Wb(187,"div",65),V.Wb(188,"p"),V.Qc(189),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Wb(190,"div",66,67),V.Wb(192,"div",68),V.Wb(193,"div",62),V.Wb(194,"div",63),V.Wb(195,"h4",64),V.Qc(196,"Error"),V.Vb(),V.Vb(),V.Wb(197,"div",65),V.Wb(198,"p"),V.Qc(199),V.Vb(),V.Vb(),V.Rb(200,"div",69),V.Vb(),V.Vb(),V.Vb()),2&t&&(V.Db(1),V.rc("formGroup",e.fpsAddForm),V.Db(15),V.Sc(" ",e.oppt_details.customer.company_name," "),V.Db(6),V.Rc(e.form_controls.fps_no.value),V.Db(7),V.rc("options",e.fpsTypeList),V.Db(5),V.rc("options",e.fpsStatusList),V.Db(8),V.Sc(" ",V.nc(43,23,e.oppt_details.created_at,"dd-MMM-yyyy")," "),V.Db(7),V.Sc(" ",e.current_apportunity_id," "),V.Db(8),V.Sc(" ",e.current_quot_id," "),V.Db(22),V.rc("options",e.payment_frequency_list),V.Db(1),V.rc("displayError",e.isFieldValid("fps_payment_frequency")),V.Db(4),V.rc("options",e.tenure_list),V.Db(1),V.rc("displayError",e.isFieldValid("fps_tenure_id")),V.Db(7),V.rc("options",e.institutions_list),V.Db(1),V.rc("displayError",e.isFieldValid("fps_financier_id")),V.Db(11),V.rc("readonly",!0),V.Db(28),V.rc("displayError",e.isFieldValid("fps_adv_payment")),V.Db(17),V.rc("options",e.fps_user_list),V.Db(4),V.rc("readonly",9!=e.fpsAddForm.controls.fps_status_id.value),V.Db(7),V.rc("options",e.fps_user_list),V.Db(8),V.rc("ngIf",e.has_min_procedure),V.Db(1),V.rc("ngIf",e.has_consumable_usage),V.Db(20),V.Rc(e.alertBody),V.Db(10),V.Rc(e.alertBody))},directives:[p.z,p.q,p.j,p.c,p.p,p.h,P.a,w,p.u,s.p,c.a,p.d,s.o,p.k,f.f,f.e],pipes:[s.f],styles:["","opp-opportunity-booking[_ngcontent-%COMP%]{width:100%}.card[_ngcontent-%COMP%], .card-header[_ngcontent-%COMP%]{border-radius:0}.card-header[_ngcontent-%COMP%]{background-color:#898485;color:#fff}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-header{font-size:24px;font-weight:bolder;background:#fff}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-header span.pi{margin-top:-8px;position:absolute;right:.5em;top:50%}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-header .p-accordion-header-link{background:#fff}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-content{padding:0}td[_ngcontent-%COMP%]{text-align:center}  .nav-link.active{background:#2297e6!important;color:#fff!important}  .nav-tabs .nav-link{border:none!important;border-left:1px solid!important}.bg-lightgrey[_ngcontent-%COMP%]{background:#fcfcfc}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   td[_ngcontent-%COMP%], .no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   th[_ngcontent-%COMP%]{border-top:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%], .no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   th[_ngcontent-%COMP%]{border-bottom:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-left:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-right:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{border-left:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{border-right:none!important}.btn-custom[_ngcontent-%COMP%]{background-color:#00538a;border-color:#00538a;color:#fff}.chead[_ngcontent-%COMP%]{font-size:24px;line-height:34px;font-style:normal;font-weight:600}.btn-icon[_ngcontent-%COMP%]{height:2rem;line-height:1rem;padding:0!important;width:2rem;font-size:1.2rem!important;font-weight:700;border-radius:50%;text-align:center}.btn-in-tab[_ngcontent-%COMP%]{position:absolute;right:-3.5rem;height:1.5rem!important;line-height:.75rem;width:1.5rem!important;font-size:.9rem}.btn-white[_ngcontent-%COMP%]{color:#fff;border-color:#fff}.btn-white[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-top:.2rem}.p-relative[_ngcontent-%COMP%]{position:relative}.p-0[_ngcontent-%COMP%]{padding:0!important}.p-125[_ngcontent-%COMP%]{padding:1.25rem}.b-btm-green[_ngcontent-%COMP%]{border-bottom:3px solid #5dbec0}.bg-opp[_ngcontent-%COMP%]{background-color:#5dbec0}.table-price[_ngcontent-%COMP%]{border-radius:30px}[_nghost-%COMP%]     .p-paginator .p-paginator-current{margin-left:auto}[_nghost-%COMP%]     .p-progressbar{height:.5rem;background-color:#d8dadc}[_nghost-%COMP%]     .p-progressbar .p-progressbar-value{background-color:#607d8b}[_nghost-%COMP%]     .table-header{display:flex;justify-content:space-between}[_nghost-%COMP%]     .p-calendar .p-datepicker{min-width:25rem}[_nghost-%COMP%]     .p-calendar .p-datepicker td{font-weight:400}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-header{padding:1rem;text-align:left;font-size:1.5rem;background-color:#898485;color:#fff}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-paginator{padding:1rem}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-thead>tr>th{text-align:left}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr>td{cursor:auto}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-dropdown-label:not(.p-placeholder){text-transform:uppercase}[_nghost-%COMP%]     .p-datatable-opportunity .p-datatable-tbody>tr>td .p-column-title{display:none}[_nghost-%COMP%]     .p-calendar, [_nghost-%COMP%]     .p-inputnumber{width:100%}[_nghost-%COMP%]     p-checkbox+label{display:inline-block;margin-bottom:0;padding-left:5px}[_nghost-%COMP%]     .p-disabled{background-color:#e4e7ea;opacity:1}[_nghost-%COMP%]     .p-dropdown .p-dropdown-label{padding:0}[_nghost-%COMP%]     table#sku_rate{width:95%;margin:auto}[_nghost-%COMP%]     table#sku_rate_datails{width:92.5%;margin:0 auto}.fa[_ngcontent-%COMP%], .icon-plus[_ngcontent-%COMP%]{cursor:pointer}.custom-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;padding:0 25px}@media screen and (max-width:960px){[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tfoot>tr>td, [_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-thead>tr>th{display:none!important}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr{border-bottom:1px solid var(--layer-2)}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr>td{text-align:left;display:block;border:0!important;width:100%!important;float:left;clear:left;border:0}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr>td .p-column-title{padding:.4rem;min-width:30%;display:inline-block;margin:-.4rem 1rem -.4rem -.4rem;font-weight:700}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr>td .p-progressbar{margin-top:.5rem}}"]}),q),T=a("1Hbi"),I=((U=function(){function e(o,n){t(this,e),this.apiClient=o,this.httpClient=n,this.apiURL=v.b.apiBaseUrl,this.httpOptions={headers:new y.e({"Content-Type":"application/json"})}}return o(e,[{key:"getList",value:function(t,e,o){var n="sku?page_items="+t+"&search_text="+e;return o&&null!=o.field&&(n+="&field="+o.field+"&order="+o.order),this.apiClient.get(n)}},{key:"getPage",value:function(t,e,o){return this.httpClient.get(t+"&page_items="+e+"&search_text="+o,this.httpOptions)}},{key:"saveSku",value:function(t){return this.apiClient.post("sku/createDraft",t)}},{key:"updateSku",value:function(t,e){return this.apiClient.post("sku/update/"+e,t)}},{key:"updateSkuPaymentMethod",value:function(t){return this.apiClient.post("sku/UpdatePaymentMethod",t)}},{key:"saveRates",value:function(t){return this.apiClient.post("rate/store",t)}},{key:"saveRateDetails",value:function(t){return this.apiClient.post("rateDetails/store",t)}},{key:"find",value:function(t){return this.httpClient.get(this.apiURL+"/sku-details/"+t).pipe()}},{key:"loadRateDetails",value:function(t){return this.httpClient.get(this.apiURL+"/rate-details/"+t).pipe()}}]),e}()).\u0275fac=function(t){return new(t||U)(V.dc(T.a),V.dc(y.b))},U.\u0275prov=V.Mb({token:U,factory:U.\u0275fac,providedIn:"root"}),U),z=a("1G5W"),G=a("XNiG"),B=a("hhfa"),j=a("MY3+"),K=a("gtx6"),X=["successModal"],H=["dangerModal"],$=["foundModal"];function Y(t,e){if(1&t){var o=V.Xb();V.Wb(0,"div",14),V.Wb(1,"div",15),V.Wb(2,"div"),V.Qc(3,"FPS SKU Listing"),V.Vb(),V.Wb(4,"div",16),V.Wb(5,"a",17),V.Rb(6,"i",18),V.Vb(),V.Vb(),V.Vb(),V.Wb(7,"div"),V.Wb(8,"span",19),V.Rb(9,"i",20),V.Wb(10,"input",21),V.gc("input",function(){return V.Fc(o),V.kc().getAll()})("ngModelChange",function(t){return V.Fc(o),V.kc().search_text=t}),V.Vb(),V.Vb(),V.Rb(11,"img",22),V.Rb(12,"img",23),V.Rb(13,"img",24),V.Vb(),V.Vb()}if(2&t){var n=V.kc();V.Db(10),V.rc("ngModel",n.search_text)}}function J(t,e){if(1&t&&(V.Wb(0,"th",26),V.Wb(1,"div",27),V.Qc(2),V.Vb(),V.Vb()),2&t){var o=e.$implicit;V.sc("pSortableColumn",o.field),V.Db(2),V.Sc(" ",o.header," ")}}var Z=function(){return{width:"5%"}};function tt(t,e){if(1&t&&(V.Wb(0,"tr"),V.Oc(1,J,3,2,"th",25),V.Rb(2,"th"),V.Vb()),2&t){var o=e.$implicit;V.Db(1),V.rc("ngForOf",o),V.Db(1),V.Kc(V.uc(3,Z))}}var et=function(t){return["/fps/",t,"sku-edit"]};function ot(t,e){if(1&t){var o=V.Xb();V.Wb(0,"tr",28),V.Wb(1,"td",29),V.Wb(2,"span",30),V.Qc(3,"FPS SKU No"),V.Vb(),V.Qc(4),V.Vb(),V.Wb(5,"td",29),V.Wb(6,"span",30),V.Qc(7,"FPS Type"),V.Vb(),V.Qc(8),V.Vb(),V.Wb(9,"td",29),V.Wb(10,"span",30),V.Qc(11,"Financial Instititue"),V.Vb(),V.Qc(12),V.Vb(),V.Wb(13,"td",29),V.Wb(14,"span",30),V.Qc(15,"Validity Start Date"),V.Vb(),V.Qc(16),V.lc(17,"date"),V.Vb(),V.Wb(18,"td",29),V.Wb(19,"span",30),V.Qc(20,"Validity End Date"),V.Vb(),V.Qc(21),V.lc(22,"date"),V.Vb(),V.Wb(23,"td",29),V.Wb(24,"span",30),V.Qc(25,"Tenure"),V.Vb(),V.Qc(26),V.Vb(),V.Wb(27,"td",29),V.Wb(28,"span",30),V.Qc(29,"Rate"),V.Vb(),V.Qc(30),V.Vb(),V.Wb(31,"td",29),V.Wb(32,"span",30),V.Qc(33,"Monthly"),V.Vb(),V.Wb(34,"mat-slide-toggle",31),V.gc("change",function(){V.Fc(o);var t=e.$implicit;return V.kc().updatePaymentMethod("monthly_payment",t.id)}),V.Vb(),V.Vb(),V.Wb(35,"td",29),V.Wb(36,"span",30),V.Qc(37,"Quarterly"),V.Vb(),V.Wb(38,"mat-slide-toggle",32),V.gc("change",function(){V.Fc(o);var t=e.$implicit;return V.kc().updatePaymentMethod("quarterly_payment",t.id)}),V.Vb(),V.Vb(),V.Wb(39,"td",29),V.Wb(40,"span",30),V.Qc(41,"Half-Yearly"),V.Vb(),V.Wb(42,"mat-slide-toggle",33),V.gc("change",function(){V.Fc(o);var t=e.$implicit;return V.kc().updatePaymentMethod("half_yearly_payment",t.id)}),V.Vb(),V.Vb(),V.Wb(43,"td",29),V.Wb(44,"span",30),V.Qc(45,"Min Usage"),V.Vb(),V.Qc(46),V.Vb(),V.Wb(47,"td",29),V.Wb(48,"span",30),V.Qc(49,"Min Procedure"),V.Vb(),V.Qc(50),V.Vb(),V.Wb(51,"td",29),V.Rb(52,"span",30),V.Rb(53,"a",34),V.Vb(),V.Vb()}if(2&t){var n=e.$implicit,a=V.kc();V.Db(4),V.Sc(" ",n.uuid," "),V.Db(4),V.Sc(" ",a.showFPSType(n.package_type_id)," "),V.Db(4),V.Sc(" ",n.financial_institution.title," "),V.Db(4),V.Sc(" ",V.nc(17,13,n.validity_start_at,"dd-MMM-yyyy")," "),V.Db(5),V.Sc(" ",V.nc(22,16,n.validity_end_at,"dd-MMM-yyyy")," "),V.Db(5),V.Sc(" ",n.required_tenure," "),V.Db(4),V.Sc(" ",n.interest_rate," "),V.Db(4),V.rc("checked",1==n.monthly_payment),V.Db(4),V.rc("checked",1==n.quarterly_payment),V.Db(4),V.rc("checked",1==n.half_yearly_payment),V.Db(4),V.Sc(" ",n.consumable_usage," "),V.Db(4),V.Sc(" ",n.min_procedure," "),V.Db(3),V.rc("routerLink",V.vc(19,et,n.id))}}function nt(t,e){1&t&&(V.Wb(0,"tr"),V.Wb(1,"td",35),V.Qc(2," No records found "),V.Vb(),V.Vb()),2&t&&(V.Db(1),V.Eb("colspan",13))}var at,rt,it=function(){return["quote_id","company","amount","status"]},dt=function(){return{showAll:"All"}},st=function(t){return[10,25,50,t]},lt=((rt=function(){function e(o,n,a,r){t(this,e),this.skuService=o,this.dialogService=n,this.zone=a,this.fpsService=r,this.ngUnsubscribe=new G.a,this.search_text="",this.pageItems=10,this.columns=[{header:"FPS SKU No",field:"uuid",type:"string"},{header:"FPS Type",field:"",type:"text"},{header:"Financial Instititue",field:"",type:"text"},{header:"Validity Start Date",field:"validity_start_at",type:"date"},{header:"Validity End Date",field:"validity_end_at",type:"date"},{header:"Tenure",field:"required_tenure",type:"number"},{header:"Rate",field:"interest_rate",type:"decimal"},{header:"Monthly",field:"monthly_payment",type:"boolean"},{header:"Quarterly",field:"quarterly_payment",type:"boolean"},{header:"Half-Yearly",field:"half_yearly_payment",type:"boolean"},{header:"Min Usage",field:"min_usage",type:"number"},{header:"Min Procedure",field:"min_procedure",type:"number"}],this.fpsTypeList=this.fpsService.getTransSactionTypeList()}return o(e,[{key:"ngOnInit",value:function(){var t=this;this.skuService.getList(this.pageItems,this.search_text,this.sort).subscribe({next:function(e){e.data.length&&t.zone.run(function(){t.skuList=e.data,t.pages=e.links,t.totalRecords=e.total})},error:function(e){t.dialogService.showErrorDialog(null!=e.error.message?e.error.message:"Error retrieve institutions list")}})}},{key:"getAll",value:function(){}},{key:"showFPSType",value:function(t){return this.fpsTypeList.find(function(e){return e.id==t}).title}},{key:"paginate",value:function(t){this.pageItems=t.rows,this.onClick(parseInt(t.page)+1)}},{key:"onClick",value:function(t){var e=this;this.skuService.getPage(this.pages[t].url,this.pageItems,this.search_text).pipe(Object(z.a)(this.ngUnsubscribe)).subscribe(function(t){e.zone.run(function(){e.skuList=t.data.data,e.pages=t.data.links,e.totalRecords=t.data.total})})}},{key:"updatePaymentMethod",value:function(t,e){var o=this;this.skuService.updateSkuPaymentMethod({id:e,field:t}).subscribe({next:function(t){200==t.code&&(o.alertBody="Payment Method Updated.",o.successModal.show(),setTimeout(function(){o.successModal.hide()},2e3))},error:function(t){o.dialogService.showErrorDialog("Payment Method Can't be Updated!<br>"+t)}})}}]),e}()).\u0275fac=function(t){return new(t||rt)(V.Qb(I),V.Qb(g.a),V.Qb(V.A),V.Qb(h.a))},rt.\u0275cmp=V.Kb({type:rt,selectors:[["app-sku-index"]],viewQuery:function(t,e){var o;1&t&&(V.Vc(X,1),V.Vc(H,1),V.Vc($,1)),2&t&&(V.Cc(o=V.hc())&&(e.successModal=o.first),V.Cc(o=V.hc())&&(e.dangerModal=o.first),V.Cc(o=V.hc())&&(e.foundModal=o.first))},decls:17,vars:14,consts:[["styleClass","p-datatable-customers","responsiveLayout","scroll",1,"table","table-hover","table-striped",3,"value","rowHover","reorderableColumns","filterDelay","globalFilterFields","columns"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"rows","totalRecords","rowsPerPageOptions","onPageChange"],["id","success","bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["successModal","bs-modal"],["role","document",1,"modal-dialog","modal-success"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],[1,"table-header"],[1,"d-flex"],[1,"ml-2","mt-1"],["routerLink","/fps/sku-create","routerLinkActive","router-link-active"],[1,"icon-plus","icons",2,"color","#ffffff"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["type","text","pInputText","","placeholder","Global Search",3,"ngModel","input","ngModelChange"],["src","../../../../assets/img/icons/Vector (2).svg",2,"width","22px","margin","0px 8px 0px 0px"],["src","../../../../assets/img/icons/Vector (1).svg",2,"width","22px"],["src","../../../../assets/img/icons/vertcalLines.svg",2,"width","22px","margin","7px"],["class","text-center","pReorderableColumn","",3,"pSortableColumn",4,"ngFor","ngForOf"],["pReorderableColumn","",1,"text-center",3,"pSortableColumn"],[1,"p-d-flex","p-jc-between","p-ai-center"],[1,"p-selectable-row"],[1,"text-center"],[1,"p-column-title"],["name","monthly_payment",1,"example-margin",3,"checked","change"],["name","quarterly_payment",1,"example-margin",3,"checked","change"],["name","half_yearly_payment",1,"example-margin",3,"checked","change"],["href","#",1,"fa","fa-edit",3,"routerLink"],[2,"text-align","center"]],template:function(t,e){1&t&&(V.Wb(0,"p-table",0,1),V.Oc(2,Y,14,1,"ng-template",2),V.Oc(3,tt,3,4,"ng-template",3),V.Oc(4,ot,54,21,"ng-template",4),V.Oc(5,nt,3,1,"ng-template",5),V.Vb(),V.Wb(6,"p-paginator",6),V.gc("onPageChange",function(t){return e.paginate(t)}),V.Vb(),V.Wb(7,"div",7,8),V.Wb(9,"div",9),V.Wb(10,"div",10),V.Wb(11,"div",11),V.Wb(12,"h4",12),V.Qc(13,"Success"),V.Vb(),V.Vb(),V.Wb(14,"div",13),V.Wb(15,"p"),V.Qc(16),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb()),2&t&&(V.rc("value",e.skuList)("rowHover",!0)("reorderableColumns",!0)("filterDelay",0)("globalFilterFields",V.uc(10,it))("columns",e.columns),V.Db(6),V.rc("rows",e.pageItems)("totalRecords",e.totalRecords)("rowsPerPageOptions",V.vc(12,st,V.uc(11,dt))),V.Db(10),V.Rc(e.alertBody))},directives:[m.e,B.h,j.a,c.a,f.f,f.e,p.c,K.a,p.p,p.s,s.o,m.b,m.d,u.a],pipes:[s.f],styles:["","tr[_ngcontent-%COMP%]{border:hidden}[_nghost-%COMP%]     .p-paginator .p-paginator-current{margin-left:auto}[_nghost-%COMP%]     .p-progressbar{height:.5rem;background-color:#d8dadc}[_nghost-%COMP%]     .p-progressbar .p-progressbar-value{background-color:#607d8b}[_nghost-%COMP%]     .table-header{display:flex;justify-content:space-between;align-items:center}[_nghost-%COMP%]     .p-calendar .p-datepicker{min-width:25rem}[_nghost-%COMP%]     .p-calendar .p-datepicker td{font-weight:400}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-header{padding:1rem;text-align:left;font-size:1.5rem;background-color:#898485;color:#fff}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-paginator{padding:1rem}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-thead>tr>th{vertical-align:middle}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-thead>tr>th>div.p-d-flex{word-break:normal}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-tbody>tr>td{cursor:auto;padding:.25em}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-dropdown-label:not(.p-placeholder){text-transform:uppercase}[_nghost-%COMP%]     .p-datatable-customers .p-datatable-tbody>tr>td .p-column-title{display:none}.dropdown-menu[_ngcontent-%COMP%]{min-width:auto}.dropdown-toggle[_ngcontent-%COMP%]:after{content:unset}.dropdown-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-weight:700;color:#000;font-size:17px;margin-right:5px}.icon-div[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center}@media screen and (max-width:960px){[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-tfoot>tr>td, [_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-thead>tr>th{display:none!important}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-tbody>tr{border-bottom:1px solid var(--layer-2)}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-tbody>tr>td{text-align:left;display:block;border:0!important;width:100%!important;float:left;clear:left;border:0}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-tbody>tr>td .p-column-title{padding:.4rem;min-width:30%;display:inline-block;margin:-.4rem 1rem -.4rem -.4rem;font-weight:700}[_nghost-%COMP%]     .p-datatable.p-datatable-customers .p-datatable-tbody>tr>td .p-progressbar{margin-top:.5rem}}"]}),rt),bt=((at=function(){function e(o){t(this,e),this.httpClient=o}return o(e,[{key:"getCountry",value:function(){return this.httpClient.get(C.a.apiBaseUrl+"/countries-list").pipe()}}]),e}()).\u0275fac=function(t){return new(t||at)(V.dc(y.b))},at.\u0275prov=V.Mb({token:at,factory:at.\u0275fac,providedIn:"root"}),at),ct=a("7vha"),pt=a("+yXi"),ut=a("FjU+"),mt=a("KnEf"),ft=["successModal"],_t=["dangerModal"],gt=["foundModal"],ht=["submitSkuAdd"],yt=["skuAddFormContainer"];function vt(t,e){1&t&&V.Rb(0,"input",76)}function Vt(t,e){if(1&t){var o=V.Xb();V.Wb(0,"tr",77),V.Wb(1,"td",78),V.Rb(2,"input",79),V.Vb(),V.Wb(3,"td",78),V.Rb(4,"input",80),V.Vb(),V.Wb(5,"td",81),V.Rb(6,"input",82),V.Vb(),V.Wb(7,"td",83),V.Rb(8,"p-dropdown",84),V.Vb(),V.Wb(9,"td",78),V.Rb(10,"p-dropdown",85),V.Vb(),V.Wb(11,"td",86),V.Rb(12,"i",87),V.Qc(13," \xa0 "),V.Wb(14,"i",88),V.gc("click",function(){V.Fc(o);var t=e.index;return V.kc().removeAddRates(t)}),V.Vb(),V.Vb(),V.Vb()}if(2&t){var n=e.index,a=V.kc();V.rc("formGroupName",n),V.Db(2),V.rc("readonly",!0),V.Db(6),V.rc("options",a.rateStatusList),V.Db(2),V.rc("options",a.rateTypeOptions)}}var Wt,Ct=((Wt=function(){function e(o,n,a,r,i,d,s,l,b,c){t(this,e),this.countryService=o,this.currencyService=n,this.institutionService=a,this.dialogService=r,this.zone=i,this.fb=d,this.SkuService=s,this.datePipe=l,this.router=b,this.fpsService=c,this.rate_counter=0,this.countryList=[],this.currencies_list=[],this.institutions_list=[],this.countryCode="",this.data_area_id="",this.fpsTypeList=this.fpsService.getTransSactionTypeList(),this.rateStatusList=this.fpsService.getrateStatusList(),this.rateTypeOptions=[{value:"normal",label:"Normal"},{value:"promotion",label:"Promotion"}]}return o(e,[{key:"ngOnInit",value:function(){var t=this;this.skuAddForm=this.fb.group({uuid:new p.f("",[p.y.required]),validity_start_at:new p.f(new Date),package_type_id:new p.f(1,[p.y.required]),validity_end_at:new p.f(new Date),country_code:new p.f("",[p.y.required]),interest_rate:new p.f,financier_id:new p.f("",[p.y.required]),has_interest_flag:new p.f,monthly_payment:new p.f,quarterly_payment:new p.f,half_yearly_payment:new p.f,currency_code:new p.f,min_payment_amount:new p.f(0),min_usage:new p.f(0),consumable_usage:new p.f,min_procedure:new p.f(0),required_tenure:new p.f(0),required_docs:new p.f,agreement_mandatory:new p.f(0)}),this.rateAddForm=this.fb.group({addRates:this.fb.array([])}),this.institutionService.getSkuAutoGeneratedKey().subscribe({next:function(e){e.success?t.zone.run(function(){t.skuAddForm.controls.uuid.setValue("FPS-"+(e.data[0].id+1))}):t.dialogService.showErrorDialog(e.message)},error:function(e){t.dialogService.showErrorDialog(null!=e.error.message?e.error.message:"Error retrieve Auto generated ID.")}}),this.countryService.getCountry().subscribe({next:function(e){e.success?t.zone.run(function(){t.countryList=e.data.countries}):t.dialogService.showErrorDialog(e.message)},error:function(e){t.dialogService.showErrorDialog(null!=e.error.message?e.error.message:"Error retrieve country list")}}),this.setConditionalValidators()}},{key:"setConditionalValidators",value:function(){var t=this.skuAddForm.get("interest_rate");this.skuAddForm.get("has_interest_flag").valueChanges.subscribe(function(e){1==e?t.setValidators([p.y.required]):t.clearValidators()})}},{key:"onSave",value:function(){var t=this;if(!this.skuAddForm.valid)return this.fpsService.validateAllFormFields(this.skuAddForm),void this.skuAddFormContainerRef.nativeElement.scrollIntoView({behavior:"smooth"});this.SkuService.saveSku({uuid:this.skuAddForm.get("uuid").value+"",country_code:this.skuAddForm.get("country_code").value+"",financier_id:this.skuAddForm.get("financier_id").value+"",monthly_payment:this.skuAddForm.get("monthly_payment").value?1:0,quarterly_payment:this.skuAddForm.get("quarterly_payment").value?1:0,half_yearly_payment:this.skuAddForm.get("half_yearly_payment").value?1:0,package_type_id:this.skuAddForm.get("package_type_id").value+"",interest_rate:(this.skuAddForm.get("interest_rate").value?this.skuAddForm.get("interest_rate").value:0)+"",currency_code:this.skuAddForm.get("currency_code").value+"",validity_start_at:this.datePipe.transform(this.skuAddForm.get("validity_start_at").value,"yyyy-MM-dd"),validity_end_at:this.datePipe.transform(this.skuAddForm.get("validity_end_at").value,"yyyy-MM-dd"),required_docs:this.skuAddForm.get("required_docs").value+"",required_tenure:this.skuAddForm.get("required_tenure").value+"",agreement_mandatory:this.skuAddForm.get("agreement_mandatory").value?1:0,data_area_id:"test_data_rea_id",consumable_usage:this.skuAddForm.get("min_usage").value+"",min_procedure:this.skuAddForm.get("min_procedure").value+"",min_payment_amount:this.skuAddForm.get("min_payment_amount").value+""}).subscribe(function(e){if(e.id){for(var o=t.rateAddForm.value.addRates,n=[],a=0;a<o.length;a++)n.push({id:null,financial_package_id:e.id,validity_start_at:o[a].validity_start_at,validity_end_at:o[a].validity_end_at,status:o[a].status,type:o[a].rate_type});n.length>0&&t.storeRates(n),t.alertBody="FPS saved successfully.",t.successModal.show(),setTimeout(function(){t.successModal.hide(),t.router.navigateByUrl("/fps/sku-listing",{replaceUrl:!0})},2e3)}},function(e){console.log(e),t.alertBody="The FPS can't save <br>"+e,t.dangerModal.show(),setTimeout(function(){t.dangerModal.hide()},2e3)})}},{key:"triggerFalseClick",value:function(){this.submitSkuAdd.nativeElement.click()}},{key:"cancelSkuForm",value:function(){this.router.navigateByUrl("/fps/sku-listing",{replaceUrl:!0})}},{key:"addRates",value:function(){return this.rateAddForm.get("addRates")}},{key:"newAddRates",value:function(){return this.fb.group({rate_no:++this.rate_counter,validity_start_at:0,validity_end_at:0,status:1,rate_type:"normal"})}},{key:"addAddRates",value:function(){this.addRates().push(this.newAddRates())}},{key:"removeAddRates",value:function(t){this.addRates().removeAt(t)}},{key:"storeRates",value:function(t){this.SkuService.saveRates(t).subscribe(function(t){t.id&&console.log("Rates Stored successfully.")},function(t){console.log(t)})}},{key:"isFieldValid",value:function(t){return!this.skuAddForm.get(t).valid&&this.skuAddForm.get(t).touched}},{key:"countryChange",value:function(){var t=this;this.countryCode=this.skuAddForm.get("country_code").value,this.currencyService.getCurrencyList(this.countryCode).subscribe({next:function(e){e.success?t.zone.run(function(){t.currencies_list=e.data}):t.dialogService.showErrorDialog(e.message)},error:function(e){t.dialogService.showErrorDialog(null!=e.error.message?e.error.message:"Error retrieve currencies list")}}),this.countryCode.length>0&&this.institutionService.getFinancialInstition(this.countryCode).subscribe({next:function(e){e.success?t.zone.run(function(){t.institutions_list=e.data.institutions}):t.dialogService.showErrorDialog(e.message)},error:function(e){t.dialogService.showErrorDialog(null!=e.error.message?e.error.message:"Error retrieve institutions list")}})}}]),e}()).\u0275fac=function(t){return new(t||Wt)(V.Qb(bt),V.Qb(k),V.Qb(M),V.Qb(g.a),V.Qb(V.A),V.Qb(p.e),V.Qb(I),V.Qb(s.f),V.Qb(f.c),V.Qb(h.a))},Wt.\u0275cmp=V.Kb({type:Wt,selectors:[["app-sku-create"]],viewQuery:function(t,e){var o;1&t&&(V.Vc(ft,1),V.Vc(_t,1),V.Vc(gt,1),V.Vc(ht,1),V.Vc(yt,1)),2&t&&(V.Cc(o=V.hc())&&(e.successModal=o.first),V.Cc(o=V.hc())&&(e.dangerModal=o.first),V.Cc(o=V.hc())&&(e.foundModal=o.first),V.Cc(o=V.hc())&&(e.submitSkuAdd=o.first),V.Cc(o=V.hc())&&(e.skuAddFormContainerRef=o.first))},decls:206,vars:27,consts:[[1,"animated","fadeIn"],[1,"row"],["skuAddFormContainer",""],[1,"col-md-12"],[1,"card"],[1,"card-body"],[1,"mb-4"],["id","skuAddForm",1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"form-group","row"],["for","booking-reason",1,"col-md-2","col-form-label"],[1,"asterisk"],[1,"col-md-4"],["type","text","formControlName","uuid","id","uuid",1,"form-control",3,"readonly"],["errorMsg","Uuid is required.",3,"displayError"],["dateFormat","yy-mm-dd","formControlName","validity_start_at",3,"showTime"],["formControlName","package_type_id","id","package_type_id","optionLabel","title","optionValue","id","styleClass","form-control","placeholder","Select FPS Type","emptyMessage","No FPS Type Available",3,"options"],["errorMsg","FPS Type is required.",3,"displayError"],["dateFormat","yy-mm-dd","formControlName","validity_end_at",3,"showTime"],["formControlName","country_code","id","country_code","optionLabel","official_name","optionValue","iso3","styleClass","form-control","placeholder","Select Country","emptyMessage","No Country Available",3,"options","onChange"],["errorMsg","Country is required.",3,"displayError"],[1,"col-md-3"],["formControlName","has_interest_flag",1,"example-margin"],["has_interest",""],[1,"col-md-9"],["type","number","step","0.1","id","interest_rate","formControlName","interest_rate","class","form-control",4,"ngIf"],["errorMsg","Interest Rate is required.",3,"displayError"],["formControlName","financier_id","id","financier_id","optionLabel","title","optionValue","id","styleClass","form-control","placeholder","Select Institution","emptyMessage","No Institution Available",3,"options"],["errorMsg","Financial Institution is required.",3,"displayError"],[1,"d-flex","justify-content-between"],[1,"d-flex"],["name","monthly_payment","formControlName","monthly_payment","inputId","status1",3,"binary"],["for","status1",1,"radio-label"],["name","quarterly_payment","formControlName","quarterly_payment","inputId","status2",3,"binary"],["for","status2",1,"radio-label"],["name","half_yearly_payment","formControlName","half_yearly_payment","inputId","status3",3,"binary"],["for","status3",1,"radio-label"],["type","number","formControlName","min_payment_amount",1,"form-control",3,"readonly"],[1,"col-md-6"],["for","booking-reason",1,"col-md-8","col-form-label"],[1,"example-margin"],["min_payment",""],["for","booking-reason",1,"col-md-4","col-form-label"],[1,"col-md-8"],["formControlName","currency_code","optionLabel","currency_code","optionValue","currency_code","styleClass","form-control","placeholder","$","emptyMessage","No Currency Available",3,"disabled","options"],["min_usage",""],["type","number","formControlName","min_usage",1,"form-control",3,"readonly"],["min_procedure",""],["type","number","formControlName","min_procedure",1,"form-control",3,"readonly"],["formControlName","agreement_mandatory",1,"example-margin"],["id","required_tenure","formControlName","required_tenure"],["errorMsg","Tenure is required.",3,"displayError"],["formControlName","required_docs","data-lpignore","true","rows","9",1,"form-control"],[1,"col-sm-12","col-md-12","form-group"],[3,"formGroup"],["styleClass","customColor","activeIndex","0",3,"multiple"],["header","FPS SKU Rate"],["id","sku_rate","formArrayName","addRates",1,"table","table-borderless"],["align","center",3,"formGroupName",4,"ngFor","ngForOf"],["align","center"],["colspan","9","align","center",1,"td-actions"],["routerLinkActive","router-link-active",3,"routerLink","click"],[1,"icon-plus","icons"],[1,"custom-footer","d-flex","justify-content-center"],["type","button",1,"btn","btn-sm","btn-light",3,"click"],["type","submit","form","skuAddForm",1,"btn","btn-sm","btn-primary"],["id","success","bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["successModal","bs-modal"],["role","document",1,"modal-dialog","modal-success"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["dangerModal","bs-modal"],["role","document",1,"modal-dialog","modal-danger"],[1,"modal-footer"],["type","number","step","0.1","id","interest_rate","formControlName","interest_rate",1,"form-control"],["align","center",3,"formGroupName"],[2,"width","15%"],["formControlName","rate_no","size","1","type","number",1,"form-control",3,"readonly"],["formControlName","validity_start_at","type","date","min","0",1,"form-control"],[2,"width","10%"],["formControlName","validity_end_at","type","date","min","0","step",".01",1,"form-control"],[2,"width","20%"],["formControlName","status","optionLabel","title","optionValue","id","styleClass","form-control","emptyMessage","No Status Available",3,"options"],["formControlName","rate_type","optionLabel","label","optionValue","value","styleClass","form-control",3,"options"],[1,"td-actions",2,"width","10%"],[1,"fa","fa-edit"],[1,"fa","fa-trash",3,"click"]],template:function(t,e){if(1&t&&(V.Wb(0,"div",0),V.Wb(1,"div",1,2),V.Wb(3,"div",3),V.Wb(4,"div",4),V.Wb(5,"div",5),V.Wb(6,"div",6),V.Wb(7,"h2"),V.Qc(8,"Create FPS SKU Management"),V.Vb(),V.Vb(),V.Rb(9,"hr"),V.Wb(10,"form",7),V.gc("ngSubmit",function(){return e.onSave()}),V.Wb(11,"div",8),V.Wb(12,"label",9),V.Qc(13," FPS SKU No "),V.Wb(14,"span",10),V.Qc(15," * "),V.Vb(),V.Vb(),V.Wb(16,"div",11),V.Rb(17,"input",12),V.Rb(18,"app-form-error-presentation",13),V.Vb(),V.Wb(19,"label",9),V.Qc(20," Validity Start Date"),V.Wb(21,"span",10),V.Qc(22," * "),V.Vb(),V.Vb(),V.Wb(23,"div",11),V.Rb(24,"p-calendar",14),V.Vb(),V.Vb(),V.Wb(25,"div",8),V.Wb(26,"label",9),V.Qc(27," FPS Type "),V.Wb(28,"span",10),V.Qc(29," * "),V.Vb(),V.Vb(),V.Wb(30,"div",11),V.Rb(31,"p-dropdown",15),V.Rb(32,"app-form-error-presentation",16),V.Vb(),V.Wb(33,"label",9),V.Qc(34," Validity End Date "),V.Vb(),V.Wb(35,"div",11),V.Rb(36,"p-calendar",17),V.Vb(),V.Vb(),V.Wb(37,"div",8),V.Wb(38,"label",9),V.Qc(39," Country"),V.Wb(40,"span",10),V.Qc(41," * "),V.Vb(),V.Vb(),V.Wb(42,"div",11),V.Wb(43,"p-dropdown",18),V.gc("onChange",function(){return e.countryChange()}),V.Vb(),V.Rb(44,"app-form-error-presentation",19),V.Vb(),V.Wb(45,"label",9),V.Qc(46," Interest "),V.Vb(),V.Wb(47,"div",11),V.Wb(48,"div",8),V.Wb(49,"div",20),V.Rb(50,"mat-slide-toggle",21,22),V.Vb(),V.Wb(52,"div",23),V.Oc(53,vt,1,0,"input",24),V.Rb(54,"app-form-error-presentation",25),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Wb(55,"div",8),V.Wb(56,"label",9),V.Qc(57," Financial Instititue"),V.Wb(58,"span",10),V.Qc(59," * "),V.Vb(),V.Vb(),V.Wb(60,"div",11),V.Rb(61,"p-dropdown",26),V.Rb(62,"app-form-error-presentation",27),V.Vb(),V.Vb(),V.Wb(63,"div",8),V.Wb(64,"label",9),V.Qc(65," Payment Frequency "),V.Vb(),V.Wb(66,"div",11),V.Wb(67,"div",28),V.Wb(68,"div",29),V.Rb(69,"p-checkbox",30),V.Wb(70,"label",31),V.Qc(71,"Monthly"),V.Vb(),V.Vb(),V.Wb(72,"div",29),V.Rb(73,"p-checkbox",32),V.Wb(74,"label",33),V.Qc(75,"Quarterly"),V.Vb(),V.Vb(),V.Wb(76,"div",29),V.Rb(77,"p-checkbox",34),V.Wb(78,"label",35),V.Qc(79,"Half-Yearly"),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Wb(80,"label",9),V.Qc(81," Mininumum Payment Amount "),V.Vb(),V.Wb(82,"div",11),V.Rb(83,"input",36),V.Vb(),V.Vb(),V.Wb(84,"div",8),V.Wb(85,"div",37),V.Wb(86,"div",8),V.Wb(87,"label",38),V.Qc(88," Mininumum Payment Amount "),V.Vb(),V.Wb(89,"div",11),V.Rb(90,"mat-slide-toggle",39,40),V.Vb(),V.Vb(),V.Vb(),V.Wb(92,"div",37),V.Wb(93,"div",8),V.Wb(94,"label",41),V.Qc(95," Min Payment Amount Currency "),V.Vb(),V.Wb(96,"div",42),V.Rb(97,"p-dropdown",43),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Wb(98,"div",8),V.Wb(99,"div",37),V.Wb(100,"div",8),V.Wb(101,"label",38),V.Qc(102," Consumable Usage"),V.Wb(103,"span",10),V.Qc(104," * "),V.Vb(),V.Vb(),V.Wb(105,"div",11),V.Rb(106,"mat-slide-toggle",39,44),V.Vb(),V.Vb(),V.Vb(),V.Wb(108,"label",9),V.Qc(109," Minimum Usage"),V.Wb(110,"span",10),V.Qc(111," * "),V.Vb(),V.Vb(),V.Wb(112,"div",11),V.Rb(113,"input",45),V.Vb(),V.Vb(),V.Wb(114,"div",8),V.Wb(115,"div",37),V.Wb(116,"div",8),V.Wb(117,"label",38),V.Qc(118," Procedure Per Month"),V.Wb(119,"span",10),V.Qc(120," * "),V.Vb(),V.Vb(),V.Wb(121,"div",11),V.Rb(122,"mat-slide-toggle",39,46),V.Vb(),V.Vb(),V.Vb(),V.Wb(124,"label",9),V.Qc(125," Minimum Procedure"),V.Wb(126,"span",10),V.Qc(127," * "),V.Vb(),V.Vb(),V.Wb(128,"div",11),V.Rb(129,"input",47),V.Vb(),V.Vb(),V.Wb(130,"div",8),V.Wb(131,"div",37),V.Wb(132,"div",8),V.Wb(133,"label",38),V.Qc(134," Agreement Number Mandatory"),V.Wb(135,"span",10),V.Qc(136," * "),V.Vb(),V.Vb(),V.Wb(137,"div",11),V.Rb(138,"mat-slide-toggle",48),V.Vb(),V.Vb(),V.Vb(),V.Wb(139,"label",9),V.Qc(140," Required Tenure"),V.Wb(141,"span",10),V.Qc(142," * "),V.Vb(),V.Vb(),V.Wb(143,"div",11),V.Rb(144,"p-inputNumber",49),V.Rb(145,"app-form-error-presentation",50),V.Vb(),V.Vb(),V.Wb(146,"div",8),V.Rb(147,"div",37),V.Wb(148,"label",9),V.Qc(149," List of Document Required "),V.Vb(),V.Wb(150,"div",11),V.Rb(151,"textarea",51),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Rb(152,"br"),V.Wb(153,"div",52),V.Wb(154,"form",53),V.Wb(155,"p-accordion",54),V.Wb(156,"p-accordionTab",55),V.Wb(157,"div",1),V.Wb(158,"table",56),V.Wb(159,"thead"),V.Wb(160,"tr"),V.Wb(161,"th"),V.Qc(162,"Rate No"),V.Vb(),V.Wb(163,"th"),V.Qc(164,"Validity Start Date"),V.Vb(),V.Wb(165,"th"),V.Qc(166,"Validity End Date"),V.Vb(),V.Wb(167,"th"),V.Qc(168,"Status"),V.Vb(),V.Wb(169,"th"),V.Qc(170,"Type"),V.Vb(),V.Rb(171,"th"),V.Vb(),V.Vb(),V.Wb(172,"tbody"),V.Oc(173,Vt,15,4,"tr",57),V.Vb(),V.Wb(174,"tfoot",58),V.Wb(175,"tr"),V.Wb(176,"td",59),V.Wb(177,"a",60),V.gc("click",function(){return e.addAddRates()}),V.Rb(178,"i",61),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Wb(179,"div",52),V.Wb(180,"div",62),V.Wb(181,"button",63),V.gc("click",function(){return e.cancelSkuForm()}),V.Qc(182," CANCEL"),V.Vb(),V.Wb(183,"button",64),V.Qc(184,"Save"),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Wb(185,"div",65,66),V.Wb(187,"div",67),V.Wb(188,"div",68),V.Wb(189,"div",69),V.Wb(190,"h4",70),V.Qc(191,"Success"),V.Vb(),V.Vb(),V.Wb(192,"div",71),V.Wb(193,"p"),V.Qc(194),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Wb(195,"div",72,73),V.Wb(197,"div",74),V.Wb(198,"div",68),V.Wb(199,"div",69),V.Wb(200,"h4",70),V.Qc(201,"Error"),V.Vb(),V.Vb(),V.Wb(202,"div",71),V.Wb(203,"p"),V.Qc(204),V.Vb(),V.Vb(),V.Rb(205,"div",75),V.Vb(),V.Vb(),V.Vb()),2&t){var o=V.Dc(51),n=V.Dc(91),a=V.Dc(107),r=V.Dc(123);V.Db(10),V.rc("formGroup",e.skuAddForm),V.Db(7),V.rc("readonly",!0),V.Db(1),V.rc("displayError",e.isFieldValid("uuid")),V.Db(6),V.rc("showTime",!1),V.Db(7),V.rc("options",e.fpsTypeList),V.Db(1),V.rc("displayError",e.isFieldValid("package_type_id")),V.Db(4),V.rc("showTime",!1),V.Db(7),V.rc("options",e.countryList),V.Db(1),V.rc("displayError",e.isFieldValid("country_code")),V.Db(9),V.rc("ngIf",o.checked),V.Db(1),V.rc("displayError",e.isFieldValid("interest_rate")),V.Db(7),V.rc("options",e.institutions_list),V.Db(1),V.rc("displayError",e.isFieldValid("financier_id")),V.Db(7),V.rc("binary",!0),V.Db(4),V.rc("binary",!0),V.Db(4),V.rc("binary",!0),V.Db(6),V.rc("readonly",!n.checked),V.Db(14),V.rc("disabled",!n.checked)("options",e.currencies_list),V.Db(16),V.rc("readonly",!a.checked),V.Db(16),V.rc("readonly",!r.checked),V.Db(16),V.rc("displayError",e.isFieldValid("required_tenure")),V.Db(9),V.rc("formGroup",e.rateAddForm),V.Db(1),V.rc("multiple",!0),V.Db(18),V.rc("ngForOf",e.addRates().controls),V.Db(21),V.Rc(e.alertBody),V.Db(10),V.Rc(e.alertBody)}},directives:[p.z,p.q,p.j,p.c,p.p,p.h,w,ct.a,P.a,u.a,s.p,pt.a,p.u,ut.a,mt.a,mt.c,p.d,s.o,f.f,f.e,c.a,p.k],styles:["","opp-opportunity-booking[_ngcontent-%COMP%]{width:100%}.card[_ngcontent-%COMP%], .card-header[_ngcontent-%COMP%]{border-radius:0}.card-header[_ngcontent-%COMP%]{background-color:#898485;color:#fff}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-header{font-size:24px;font-weight:bolder;background:#fff}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-header span.pi{margin-top:-8px;position:absolute;right:.5em;top:50%}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-header .p-accordion-header-link{background:#fff}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-content{padding:0}td[_ngcontent-%COMP%]{text-align:center}  .nav-link.active{background:#2297e6!important;color:#fff!important}  .nav-tabs .nav-link{border:none!important;border-left:1px solid!important}.bg-lightgrey[_ngcontent-%COMP%]{background:#fcfcfc}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   td[_ngcontent-%COMP%], .no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   th[_ngcontent-%COMP%]{border-top:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%], .no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   th[_ngcontent-%COMP%]{border-bottom:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-left:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-right:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{border-left:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{border-right:none!important}.btn-custom[_ngcontent-%COMP%]{background-color:#00538a;border-color:#00538a;color:#fff}.chead[_ngcontent-%COMP%]{font-size:24px;line-height:34px;font-style:normal;font-weight:600}.btn-icon[_ngcontent-%COMP%]{height:2rem;line-height:1rem;padding:0!important;width:2rem;font-size:1.2rem!important;font-weight:700;border-radius:50%;text-align:center}.btn-in-tab[_ngcontent-%COMP%]{position:absolute;right:-3.5rem;height:1.5rem!important;line-height:.75rem;width:1.5rem!important;font-size:.9rem}.btn-white[_ngcontent-%COMP%]{color:#fff;border-color:#fff}.btn-white[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-top:.2rem}.p-relative[_ngcontent-%COMP%]{position:relative}.p-0[_ngcontent-%COMP%]{padding:0!important}.p-125[_ngcontent-%COMP%]{padding:1.25rem}.b-btm-green[_ngcontent-%COMP%]{border-bottom:3px solid #5dbec0}.bg-opp[_ngcontent-%COMP%]{background-color:#5dbec0}.table-price[_ngcontent-%COMP%]{border-radius:30px}[_nghost-%COMP%]     .p-paginator .p-paginator-current{margin-left:auto}[_nghost-%COMP%]     .p-progressbar{height:.5rem;background-color:#d8dadc}[_nghost-%COMP%]     .p-progressbar .p-progressbar-value{background-color:#607d8b}[_nghost-%COMP%]     .table-header{display:flex;justify-content:space-between}[_nghost-%COMP%]     .p-calendar .p-datepicker{min-width:25rem}[_nghost-%COMP%]     .p-calendar .p-datepicker td{font-weight:400}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-header{padding:1rem;text-align:left;font-size:1.5rem;background-color:#898485;color:#fff}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-paginator{padding:1rem}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-thead>tr>th{text-align:left}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr>td{cursor:auto}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-dropdown-label:not(.p-placeholder){text-transform:uppercase}[_nghost-%COMP%]     .p-datatable-opportunity .p-datatable-tbody>tr>td .p-column-title{display:none}[_nghost-%COMP%]     .p-calendar, [_nghost-%COMP%]     .p-inputnumber{width:100%}[_nghost-%COMP%]     p-checkbox+label{display:inline-block;margin-bottom:0;padding-left:5px}[_nghost-%COMP%]     .p-disabled{background-color:#e4e7ea;opacity:1}[_nghost-%COMP%]     .p-dropdown .p-dropdown-label{padding:0}[_nghost-%COMP%]     table#sku_rate{width:95%;margin:auto}[_nghost-%COMP%]     table#sku_rate_datails{width:92.5%;margin:0 auto}.fa[_ngcontent-%COMP%], .icon-plus[_ngcontent-%COMP%]{cursor:pointer}.custom-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;padding:0 25px}@media screen and (max-width:960px){[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tfoot>tr>td, [_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-thead>tr>th{display:none!important}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr{border-bottom:1px solid var(--layer-2)}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr>td{text-align:left;display:block;border:0!important;width:100%!important;float:left;clear:left;border:0}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr>td .p-column-title{padding:.4rem;min-width:30%;display:inline-block;margin:-.4rem 1rem -.4rem -.4rem;font-weight:700}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr>td .p-progressbar{margin-top:.5rem}}"]}),Wt),Mt=["addProductModal"],kt=["successModal"],Pt=["dangerModal"],Ft=["foundModal"],Ot=["submitSkuAdd"],wt=["skuEditFormContainer"];function Rt(t,e){1&t&&V.Rb(0,"input",93)}function Qt(t,e){if(1&t){var o=V.Xb();V.Wb(0,"tr",94),V.Wb(1,"td",95),V.Rb(2,"input",96),V.Vb(),V.Wb(3,"td",95),V.Rb(4,"input",97),V.Vb(),V.Wb(5,"td",98),V.Rb(6,"input",99),V.Vb(),V.Wb(7,"td",100),V.Rb(8,"p-dropdown",101),V.Vb(),V.Wb(9,"td",95),V.Rb(10,"p-dropdown",102),V.Vb(),V.Wb(11,"td",103),V.Wb(12,"a",62),V.gc("click",function(){V.Fc(o);var t=e.index;return V.kc().openAddRateDetailsModal(!0,t)}),V.Rb(13,"i",104),V.Vb(),V.Qc(14," \xa0 "),V.Wb(15,"a",62),V.gc("click",function(){V.Fc(o);var t=e.index;return V.kc().removeAddRates(t)}),V.Rb(16,"i",105),V.Vb(),V.Vb(),V.Vb()}if(2&t){var n=e.index,a=V.kc();V.rc("formGroupName",n),V.Db(2),V.rc("readonly",!0),V.Db(6),V.rc("options",a.rateStatusList),V.Db(2),V.rc("options",a.rateTypeOptions)}}function St(t,e){if(1&t){var o=V.Xb();V.Wb(0,"tr",94),V.Wb(1,"td",106),V.Rb(2,"input",107),V.Vb(),V.Wb(3,"td",106),V.Rb(4,"input",108),V.Vb(),V.Wb(5,"td",103),V.Wb(6,"i",109),V.gc("click",function(){V.Fc(o);var t=e.index;return V.kc().removeAddRateDetails(t)}),V.Vb(),V.Vb(),V.Vb()}2&t&&V.rc("formGroupName",e.index)}var Dt,At=((Dt=function(){function e(o,n,a,r,i,d,s,l,b,c,p){t(this,e),this.countryService=o,this.currencyService=n,this.institutionService=a,this.dialogService=r,this.zone=i,this.fb=d,this.SkuService=s,this.route=l,this.fpsService=b,this.datePipe=c,this.router=p,this.rate_counter=0,this.countryList=[],this.currencies_list=[],this.existingRatesIds=[],this.institutions_list=[],this.countryCode="",this.data_area_id="",this.has_interest_flag=!1,this.fpsTypeList=this.fpsService.getTransSactionTypeList(),this.rateStatusList=this.fpsService.getrateStatusList(),this.rateTypeOptions=[{value:"normal",label:"Normal"},{value:"promotion",label:"Promotion"}]}return o(e,[{key:"ngOnInit",value:function(){var t=this;this.rateAddForm=this.fb.group({addRates:this.fb.array([])}),this.rateDatailAddForm=this.fb.group({addRateDetails:this.fb.array([])}),this.route.paramMap.subscribe(function(e){e.get("id")&&(t.getData(e.get("id")),t.skuID=e.get("id"))}),this.skuEditForm=this.fb.group({uuid:new p.f("",[p.y.required]),validity_start_at:new p.f(new Date),package_type_id:new p.f("1",[p.y.required]),validity_end_at:new p.f(new Date),country_code:new p.f("",[p.y.required]),interest_rate:new p.f,financier_id:new p.f("",[p.y.required]),has_interest_flag:new p.f,min_payment_amount_flag:new p.f,monthly_payment:new p.f,quarterly_payment:new p.f,half_yearly_payment:new p.f,currency_code:new p.f,min_payment_amount:new p.f(0),consumable_usage:new p.f,min_procedure:new p.f,required_tenure:new p.f(0),required_docs:new p.f,agreement_mandatory:new p.f(0),has_min_procedure:new p.f(0),has_consumable_usage:new p.f(0)}),this.countryService.getCountry().subscribe({next:function(e){e.success?t.zone.run(function(){t.countryList=e.data.countries}):t.dialogService.showErrorDialog(e.message)},error:function(e){t.dialogService.showErrorDialog(null!=e.error.message?e.error.message:"Error retrieve country list")}}),this.loadInstitutionsList(),this.setConditionalValidators()}},{key:"cancelSkuForm",value:function(){}},{key:"setConditionalValidators",value:function(){var t=this.skuEditForm.get("interest_rate");this.skuEditForm.get("has_interest_flag").valueChanges.subscribe(function(e){1==e?t.setValidators([p.y.required]):t.clearValidators()})}},{key:"getData",value:function(t){var e=this;this.SkuService.find(t).subscribe(function(t){e.skuEditForm.patchValue(t.data),e.countryCode=e.skuEditForm.get("country_code").value,e.countryChange(),t.data.interest_rate>0&&e.skuEditForm.controls.has_interest_flag.setValue(!0),t.data.min_payment_amount>0&&e.skuEditForm.controls.min_payment_amount_flag.setValue(!0),t.data.consumable_usage>0&&e.skuEditForm.controls.has_consumable_usage.setValue(!0),t.data.min_procedure>0&&e.skuEditForm.controls.has_min_procedure.setValue(!0),t.data.rates.forEach(function(t){e.rate_counter=t.id,e.addRates().push(e.existingRates(t)),e.existingRatesIds.push(t.id)})})}},{key:"isFieldValid",value:function(t){return!this.skuEditForm.get(t).valid&&this.skuEditForm.get(t).touched}},{key:"onSave",value:function(){var t=this;if(!this.skuEditForm.valid)return this.fpsService.validateAllFormFields(this.skuEditForm),void this.skuEditFormContainerRef.nativeElement.scrollIntoView({behavior:"smooth"});this.SkuService.updateSku({uuid:this.skuEditForm.get("uuid").value+"",country_code:this.skuEditForm.get("country_code").value+"",financier_id:this.skuEditForm.get("financier_id").value+"",monthly_payment:this.skuEditForm.get("monthly_payment").value?1:0,quarterly_payment:this.skuEditForm.get("quarterly_payment").value?1:0,half_yearly_payment:this.skuEditForm.get("half_yearly_payment").value?1:0,package_type_id:this.skuEditForm.get("package_type_id").value+"",interest_rate:(this.skuEditForm.get("interest_rate").value?this.skuEditForm.get("interest_rate").value:0)+"",currency_code:this.skuEditForm.get("currency_code").value+"",validity_start_at:this.datePipe.transform(this.skuEditForm.get("validity_start_at").value,"yyyy-MM-dd"),validity_end_at:this.datePipe.transform(this.skuEditForm.get("validity_end_at").value,"yyyy-MM-dd"),required_docs:this.skuEditForm.get("required_docs").value+"",required_tenure:this.skuEditForm.get("required_tenure").value+"",agreement_mandatory:this.skuEditForm.get("agreement_mandatory").value+"",data_area_id:"test_data_rea_id",consumable_usage:this.skuEditForm.get("consumable_usage").value+"",min_procedure:this.skuEditForm.get("min_procedure").value+"",min_payment_amount:this.skuEditForm.get("min_payment_amount").value+""},this.skuID).subscribe(function(e){e.id&&(t.alertBody="FPS updated successfully.",t.successModal.show(),setTimeout(function(){t.successModal.hide();for(var o=t.rateAddForm.value.addRates,n=[],a=0;a<o.length;a++)n.push({id:t.existingRatesIds.includes(o[a].rate_no)?o[a].rate_no:null,financial_package_id:e.id,validity_start_at:o[a].validity_start_at,validity_end_at:o[a].validity_end_at,status:o[a].status,type:o[a].type});n.length>0&&t.storeRates(n),t.router.navigateByUrl("/fps/sku-listing",{replaceUrl:!0})},2e3))},function(e){console.log(e),t.alertBody="The FPS can't updated <br>"+e,t.dangerModal.show(),setTimeout(function(){t.dangerModal.hide()},2e3)})}},{key:"onSaveRateDetails",value:function(){for(var t=this.rateDatailAddForm.value.addRateDetails,e=[],o=0;o<t.length;o++)t[o].details_tenure>0&&t[o].details_interest_rate>0&&e.push({details_rate_no:this.currentRateNo,details_tenure:t[o].details_tenure,details_interest_rate:t[o].details_interest_rate});this.storeRatesDetails(e),this.addRateDetailsModal.hide()}},{key:"addRates",value:function(){return this.rateAddForm.get("addRates")}},{key:"existingRates",value:function(t){return this.fb.group({rate_no:t.id,validity_start_at:t.validity_start_at,validity_end_at:t.validity_end_at,status:t.status,type:t.type})}},{key:"newAddRates",value:function(){return this.fb.group({rate_no:++this.rate_counter,validity_start_at:0,validity_end_at:0,status:1,type:"normal"})}},{key:"addAddRates",value:function(){this.addRates().push(this.newAddRates())}},{key:"removeAddRates",value:function(t){this.addRates().removeAt(t)}},{key:"storeRates",value:function(t){this.SkuService.saveRates(t).subscribe(function(t){t.id&&console.log("Rates Stored successfully.")},function(t){console.log(t)})}},{key:"countryChange",value:function(){var t=this;this.countryCode=this.skuEditForm.get("country_code").value,this.currencyService.getCurrencyList(this.countryCode).subscribe({next:function(e){e.success?t.zone.run(function(){t.currencies_list=e.data}):t.dialogService.showErrorDialog(e.message)},error:function(e){t.dialogService.showErrorDialog(null!=e.error.message?e.error.message:"Error retrieve currencies list")}}),this.loadInstitutionsList()}},{key:"loadInstitutionsList",value:function(){var t=this;this.countryCode.length>0&&this.institutionService.getFinancialInstition(this.countryCode).subscribe({next:function(e){e.success?t.zone.run(function(){t.institutions_list=e.data.institutions}):t.dialogService.showErrorDialog(e.message)},error:function(e){t.dialogService.showErrorDialog(null!=e.error.message?e.error.message:"Error retrieve institutions list")}})}},{key:"openAddRateDetailsModal",value:function(t,e){var o=this;this.rateDatailAddForm=this.fb.group({addRateDetails:this.fb.array([])}),this.currentRateNo=this.rateAddForm.value.addRates[e].rate_no,this.currentRateStart=this.rateAddForm.value.addRates[e].validity_start_at,this.currentRateEnd=this.rateAddForm.value.addRates[e].validity_end_at,this.currentRateType=this.rateAddForm.value.addRates[e].type,this.SkuService.loadRateDetails(this.currentRateNo).subscribe(function(e){e.data.rate_details.forEach(function(t){o.addRateDetails().push(o.existingRateDetails(t))}),o.addLine=t,o.addRateDetailsModal.show()},function(t){alert("Details for new rates can be added only after saving. please save and re-edit.")})}},{key:"addRateDetails",value:function(){return this.rateDatailAddForm.get("addRateDetails")}},{key:"existingRateDetails",value:function(t){return this.fb.group({details_tenure:t.details_tenure,details_interest_rate:t.details_interest_rate})}},{key:"newAddRateDetails",value:function(){return this.fb.group({details_tenure:0,details_interest_rate:0})}},{key:"addAddRateDetails",value:function(){this.addRateDetails().push(this.newAddRateDetails())}},{key:"removeAddRateDetails",value:function(t){this.addRateDetails().removeAt(t)}},{key:"storeRatesDetails",value:function(t){this.SkuService.saveRateDetails(t).subscribe(function(t){t.id&&console.log("Rate Details Stored successfully.")},function(t){console.log(t)})}}]),e}()).\u0275fac=function(t){return new(t||Dt)(V.Qb(bt),V.Qb(k),V.Qb(M),V.Qb(g.a),V.Qb(V.A),V.Qb(p.e),V.Qb(I),V.Qb(f.a),V.Qb(h.a),V.Qb(s.f),V.Qb(f.c))},Dt.\u0275cmp=V.Kb({type:Dt,selectors:[["app-sku-edit"]],viewQuery:function(t,e){var o;1&t&&(V.Vc(Mt,1),V.Vc(kt,1),V.Vc(Pt,1),V.Vc(Ft,1),V.Vc(Ot,1),V.Vc(wt,1)),2&t&&(V.Cc(o=V.hc())&&(e.addRateDetailsModal=o.first),V.Cc(o=V.hc())&&(e.successModal=o.first),V.Cc(o=V.hc())&&(e.dangerModal=o.first),V.Cc(o=V.hc())&&(e.foundModal=o.first),V.Cc(o=V.hc())&&(e.submitSkuAdd=o.first),V.Cc(o=V.hc())&&(e.skuEditFormContainerRef=o.first))},decls:262,vars:38,consts:[[1,"animated","fadeIn"],[1,"row"],["skuEditFormContainer",""],[1,"col-md-12"],[1,"card"],[1,"card-body"],[1,"mb-4"],["id","skuEditForm",1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"form-group","row"],["for","booking-reason",1,"col-md-2","col-form-label"],[1,"asterisk"],[1,"col-md-4"],["type","text","formControlName","uuid","id","uuid",1,"form-control",3,"readonly"],["errorMsg","Uuid is required.",3,"displayError"],["dateFormat","yy-mm-dd","formControlName","validity_start_at",3,"showTime"],["formControlName","package_type_id","id","package_type_id","optionLabel","title","optionValue","id","styleClass","form-control","placeholder","Select FPS Type","emptyMessage","No FPS Type Available",3,"options"],["errorMsg","FPS Type is required.",3,"displayError"],["dateFormat","yy-mm-dd","formControlName","validity_end_at",3,"showTime"],["formControlName","country_code","id","country_code","optionLabel","official_name","optionValue","iso3","styleClass","form-control","placeholder","Select Country","emptyMessage","No Country Available",3,"options","onChange"],["errorMsg","Country is required.",3,"displayError"],[1,"col-md-3"],["formControlName","has_interest_flag",1,"example-margin"],["has_interest",""],[1,"col-md-9"],["type","number","step","0.1","id","interest_rate","formControlName","interest_rate","class","form-control",4,"ngIf"],["errorMsg","Interest Rate is required.",3,"displayError"],["formControlName","financier_id","id","financier_id","optionLabel","title","optionValue","id","styleClass","form-control","placeholder","Select Institution","emptyMessage","No Institution Available",3,"options"],["errorMsg","Financial Institution is required.",3,"displayError"],[1,"d-flex","justify-content-between"],[1,"d-flex"],["name","monthly_payment","formControlName","monthly_payment","inputId","status1",3,"binary"],["for","status1",1,"radio-label"],["name","quarterly_payment","formControlName","quarterly_payment","inputId","status2",3,"binary"],["for","status2",1,"radio-label"],["name","half_yearly_payment","formControlName","half_yearly_payment","inputId","status3",3,"binary"],["for","status3",1,"radio-label"],["type","number","formControlName","min_payment_amount",1,"form-control",3,"readonly"],[1,"col-md-6"],["for","booking-reason",1,"col-md-8","col-form-label"],["formControlName","min_payment_amount_flag",1,"example-margin"],["min_payment",""],["for","booking-reason",1,"col-md-4","col-form-label"],[1,"col-md-8"],["formControlName","currency_code","optionLabel","currency_code","optionValue","currency_code","styleClass","form-control","placeholder","$","emptyMessage","No Currency Available",3,"disabled","options"],["formControlName","has_consumable_usage",1,"example-margin"],["min_usage",""],["type","number","formControlName","consumable_usage",1,"form-control",3,"readonly"],["formControlName","has_min_procedure",1,"example-margin"],["min_procedure",""],["type","number","formControlName","min_procedure",1,"form-control",3,"readonly"],["formControlName","agreement_mandatory",1,"example-margin"],["id","required_tenure","formControlName","required_tenure"],["errorMsg","Tenure is required.",3,"displayError"],["formControlName","required_docs","data-lpignore","true","rows","9",1,"form-control"],[1,"col-sm-12","col-md-12","form-group"],[3,"formGroup"],["styleClass","customColor","activeIndex","0",3,"multiple"],["header","FPS SKU Rate"],["id","sku_rate","formArrayName","addRates",1,"table","table-borderless"],["align","center",3,"formGroupName",4,"ngFor","ngForOf"],["align","center"],["colspan","9","align","center",1,"td-actions"],["routerLinkActive","router-link-active",3,"routerLink","click"],[1,"icon-plus","icons"],[1,"custom-footer","d-flex","justify-content-center"],["type","button",1,"btn","btn-sm","btn-light",3,"click"],["type","submit","form","skuEditForm",1,"btn","btn-sm","btn-primary"],["id","success","bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["successModal","bs-modal"],["role","document",1,"modal-dialog","modal-success"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["dangerModal","bs-modal"],["role","document",1,"modal-dialog","modal-danger"],[1,"modal-footer"],["addProductModal","bs-modal"],["role","document",1,"modal-dialog","modal-md"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"top-info"],[1,"row","form-group","top-info-1"],[1,"col-md-6","info-text"],["type","text",1,"form-control",3,"value","disabled"],[1,"table-div"],[3,"formGroup","ngSubmit"],["header","Rate Details"],["id","sku_rate_datails","formArrayName","addRateDetails",1,"table","table-borderless"],["colspan","3","align","center",1,"td-actions"],["colspan","3",1,"td-actions"],["type","submit","value","Submit",1,"btn","btn-primary",2,"float","right"],["type","number","step","0.1","id","interest_rate","formControlName","interest_rate",1,"form-control"],["align","center",3,"formGroupName"],[2,"width","15%"],["formControlName","rate_no","size","1","type","number",1,"form-control",3,"readonly"],["formControlName","validity_start_at","type","date","min","0",1,"form-control"],[2,"width","10%"],["formControlName","validity_end_at","type","date","min","0","step",".01",1,"form-control"],[2,"width","20%"],["formControlName","status","optionLabel","title","optionValue","id","styleClass","form-control","emptyMessage","No Status Available",3,"options"],["formControlName","type","optionLabel","label","optionValue","value","styleClass","form-control",3,"options"],[1,"td-actions",2,"width","10%"],["title","Add SKU Rate Details",1,"fa","fa-plus"],[1,"fa","fa-trash"],[2,"width","45%"],["formControlName","details_tenure","size","1","type","number",1,"form-control"],["formControlName","details_interest_rate","size","1","type","number","step","0.1",1,"form-control"],[1,"fa","fa-trash",3,"click"]],template:function(t,e){if(1&t){var o=V.Xb();V.Wb(0,"div",0),V.Wb(1,"div",1,2),V.Wb(3,"div",3),V.Wb(4,"div",4),V.Wb(5,"div",5),V.Wb(6,"div",6),V.Wb(7,"h2"),V.Qc(8,"Edit FPS SKU Management"),V.Vb(),V.Vb(),V.Rb(9,"hr"),V.Wb(10,"form",7),V.gc("ngSubmit",function(){return e.onSave()}),V.Wb(11,"div",8),V.Wb(12,"label",9),V.Qc(13," FPS SKU No "),V.Wb(14,"span",10),V.Qc(15," * "),V.Vb(),V.Vb(),V.Wb(16,"div",11),V.Rb(17,"input",12),V.Rb(18,"app-form-error-presentation",13),V.Vb(),V.Wb(19,"label",9),V.Qc(20," Validity Start Date"),V.Wb(21,"span",10),V.Qc(22," * "),V.Vb(),V.Vb(),V.Wb(23,"div",11),V.Rb(24,"p-calendar",14),V.Vb(),V.Vb(),V.Wb(25,"div",8),V.Wb(26,"label",9),V.Qc(27," FPS Type "),V.Wb(28,"span",10),V.Qc(29," * "),V.Vb(),V.Vb(),V.Wb(30,"div",11),V.Rb(31,"p-dropdown",15),V.Rb(32,"app-form-error-presentation",16),V.Vb(),V.Wb(33,"label",9),V.Qc(34," Validity End Date "),V.Vb(),V.Wb(35,"div",11),V.Rb(36,"p-calendar",17),V.Vb(),V.Vb(),V.Wb(37,"div",8),V.Wb(38,"label",9),V.Qc(39," Country"),V.Wb(40,"span",10),V.Qc(41," * "),V.Vb(),V.Vb(),V.Wb(42,"div",11),V.Wb(43,"p-dropdown",18),V.gc("onChange",function(){return e.countryChange()}),V.Vb(),V.Rb(44,"app-form-error-presentation",19),V.Vb(),V.Wb(45,"label",9),V.Qc(46," Interest "),V.Vb(),V.Wb(47,"div",11),V.Wb(48,"div",8),V.Wb(49,"div",20),V.Rb(50,"mat-slide-toggle",21,22),V.Vb(),V.Wb(52,"div",23),V.Oc(53,Rt,1,0,"input",24),V.Rb(54,"app-form-error-presentation",25),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Wb(55,"div",8),V.Wb(56,"label",9),V.Qc(57," Financial Instititue"),V.Wb(58,"span",10),V.Qc(59," * "),V.Vb(),V.Vb(),V.Wb(60,"div",11),V.Rb(61,"p-dropdown",26),V.Rb(62,"app-form-error-presentation",27),V.Vb(),V.Vb(),V.Wb(63,"div",8),V.Wb(64,"label",9),V.Qc(65," Payment Frequency "),V.Vb(),V.Wb(66,"div",11),V.Wb(67,"div",28),V.Wb(68,"div",29),V.Rb(69,"p-checkbox",30),V.Wb(70,"label",31),V.Qc(71,"Monthly"),V.Vb(),V.Vb(),V.Wb(72,"div",29),V.Rb(73,"p-checkbox",32),V.Wb(74,"label",33),V.Qc(75,"Quarterly"),V.Vb(),V.Vb(),V.Wb(76,"div",29),V.Rb(77,"p-checkbox",34),V.Wb(78,"label",35),V.Qc(79,"Half-Yearly"),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Wb(80,"label",9),V.Qc(81," Mininumum Payment Amount "),V.Vb(),V.Wb(82,"div",11),V.Rb(83,"input",36),V.Vb(),V.Vb(),V.Wb(84,"div",8),V.Wb(85,"div",37),V.Wb(86,"div",8),V.Wb(87,"label",38),V.Qc(88," Mininumum Payment Amount "),V.Vb(),V.Wb(89,"div",11),V.Rb(90,"mat-slide-toggle",39,40),V.Vb(),V.Vb(),V.Vb(),V.Wb(92,"div",37),V.Wb(93,"div",8),V.Wb(94,"label",41),V.Qc(95," Min Payment Amount Currency "),V.Vb(),V.Wb(96,"div",42),V.Rb(97,"p-dropdown",43),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Wb(98,"div",8),V.Wb(99,"div",37),V.Wb(100,"div",8),V.Wb(101,"label",38),V.Qc(102," Consumable Usage "),V.Wb(103,"span",10),V.Qc(104," * "),V.Vb(),V.Vb(),V.Wb(105,"div",11),V.Rb(106,"mat-slide-toggle",44,45),V.Vb(),V.Vb(),V.Vb(),V.Wb(108,"label",9),V.Qc(109," Minimum Usage"),V.Wb(110,"span",10),V.Qc(111," * "),V.Vb(),V.Vb(),V.Wb(112,"div",11),V.Rb(113,"input",46),V.Vb(),V.Vb(),V.Wb(114,"div",8),V.Wb(115,"div",37),V.Wb(116,"div",8),V.Wb(117,"label",38),V.Qc(118," Procedure Per Month"),V.Wb(119,"span",10),V.Qc(120," * "),V.Vb(),V.Vb(),V.Wb(121,"div",11),V.Rb(122,"mat-slide-toggle",47,48),V.Vb(),V.Vb(),V.Vb(),V.Wb(124,"label",9),V.Qc(125," Minimum Procedure"),V.Wb(126,"span",10),V.Qc(127," * "),V.Vb(),V.Vb(),V.Wb(128,"div",11),V.Rb(129,"input",49),V.Vb(),V.Vb(),V.Wb(130,"div",8),V.Wb(131,"div",37),V.Wb(132,"div",8),V.Wb(133,"label",38),V.Qc(134," Agreement Number Mandatory"),V.Wb(135,"span",10),V.Qc(136," * "),V.Vb(),V.Vb(),V.Wb(137,"div",11),V.Rb(138,"mat-slide-toggle",50),V.Vb(),V.Vb(),V.Vb(),V.Wb(139,"label",9),V.Qc(140," Required Tenure"),V.Wb(141,"span",10),V.Qc(142," * "),V.Vb(),V.Vb(),V.Wb(143,"div",11),V.Rb(144,"p-inputNumber",51),V.Rb(145,"app-form-error-presentation",52),V.Vb(),V.Vb(),V.Wb(146,"div",8),V.Rb(147,"div",37),V.Wb(148,"label",9),V.Qc(149," List of Document Required "),V.Vb(),V.Wb(150,"div",11),V.Rb(151,"textarea",53),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Rb(152,"br"),V.Wb(153,"div",54),V.Wb(154,"form",55),V.Wb(155,"p-accordion",56),V.Wb(156,"p-accordionTab",57),V.Wb(157,"div",1),V.Wb(158,"table",58),V.Wb(159,"thead"),V.Wb(160,"tr"),V.Wb(161,"th"),V.Qc(162,"Rate No"),V.Vb(),V.Wb(163,"th"),V.Qc(164,"Validity Start Date"),V.Vb(),V.Wb(165,"th"),V.Qc(166,"Validity End Date"),V.Vb(),V.Wb(167,"th"),V.Qc(168,"Status"),V.Vb(),V.Wb(169,"th"),V.Qc(170,"Type"),V.Vb(),V.Rb(171,"th"),V.Vb(),V.Vb(),V.Wb(172,"tbody"),V.Oc(173,Qt,17,4,"tr",59),V.Vb(),V.Wb(174,"tfoot",60),V.Wb(175,"tr"),V.Wb(176,"td",61),V.Wb(177,"a",62),V.gc("click",function(){return e.addAddRates()}),V.Rb(178,"i",63),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Wb(179,"div",54),V.Wb(180,"div",64),V.Wb(181,"button",65),V.gc("click",function(){return e.cancelSkuForm()}),V.Qc(182," CANCEL"),V.Vb(),V.Wb(183,"button",66),V.Qc(184,"Save"),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Wb(185,"div",67,68),V.Wb(187,"div",69),V.Wb(188,"div",70),V.Wb(189,"div",71),V.Wb(190,"h4",72),V.Qc(191,"Success"),V.Vb(),V.Vb(),V.Wb(192,"div",73),V.Wb(193,"p"),V.Qc(194),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Wb(195,"div",74,75),V.Wb(197,"div",76),V.Wb(198,"div",70),V.Wb(199,"div",71),V.Wb(200,"h4",72),V.Qc(201,"Error"),V.Vb(),V.Vb(),V.Wb(202,"div",73),V.Wb(203,"p"),V.Qc(204),V.Vb(),V.Vb(),V.Rb(205,"div",77),V.Vb(),V.Vb(),V.Vb(),V.Wb(206,"div",74,78),V.Wb(208,"div",79),V.Wb(209,"div",70),V.Wb(210,"div",71),V.Wb(211,"h4",72),V.Qc(212,"FPS SKU Rate Details"),V.Vb(),V.Wb(213,"button",80),V.gc("click",function(){return V.Fc(o),V.Dc(207).hide()}),V.Wb(214,"span",81),V.Qc(215,"\xd7"),V.Vb(),V.Vb(),V.Vb(),V.Wb(216,"div",73),V.Wb(217,"div",82),V.Wb(218,"div",83),V.Wb(219,"div",84),V.Qc(220,"Rate No."),V.Vb(),V.Wb(221,"div",37),V.Rb(222,"input",85),V.Vb(),V.Vb(),V.Wb(223,"div",83),V.Wb(224,"div",84),V.Qc(225,"Validity Start"),V.Vb(),V.Wb(226,"div",37),V.Rb(227,"input",85),V.Vb(),V.Vb(),V.Wb(228,"div",83),V.Wb(229,"div",84),V.Qc(230,"Validity End"),V.Vb(),V.Wb(231,"div",37),V.Rb(232,"input",85),V.Vb(),V.Vb(),V.Wb(233,"div",83),V.Wb(234,"div",84),V.Qc(235,"Type"),V.Vb(),V.Wb(236,"div",37),V.Rb(237,"input",85),V.Vb(),V.Vb(),V.Vb(),V.Rb(238,"hr"),V.Wb(239,"div",86),V.Wb(240,"form",87),V.gc("ngSubmit",function(){return e.onSaveRateDetails()}),V.Wb(241,"p-accordion",56),V.Wb(242,"p-accordionTab",88),V.Wb(243,"div",1),V.Wb(244,"table",89),V.Wb(245,"thead"),V.Wb(246,"tr"),V.Wb(247,"th"),V.Qc(248,"Tenure"),V.Vb(),V.Wb(249,"th"),V.Qc(250,"Interest Rate"),V.Vb(),V.Vb(),V.Vb(),V.Wb(251,"tbody"),V.Oc(252,St,7,1,"tr",59),V.Vb(),V.Wb(253,"tfoot",60),V.Wb(254,"tr"),V.Wb(255,"td",90),V.Wb(256,"a",62),V.gc("click",function(){return e.addAddRateDetails()}),V.Rb(257,"i",63),V.Vb(),V.Vb(),V.Vb(),V.Wb(258,"tr"),V.Wb(259,"td",91),V.Rb(260,"input",92),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Rb(261,"hr"),V.Vb(),V.Vb(),V.Vb(),V.Vb()}if(2&t){var n=V.Dc(51),a=V.Dc(91),r=V.Dc(107),i=V.Dc(123);V.Db(10),V.rc("formGroup",e.skuEditForm),V.Db(7),V.rc("readonly",!0),V.Db(1),V.rc("displayError",e.isFieldValid("uuid")),V.Db(6),V.rc("showTime",!1),V.Db(7),V.rc("options",e.fpsTypeList),V.Db(1),V.rc("displayError",e.isFieldValid("package_type_id")),V.Db(4),V.rc("showTime",!1),V.Db(7),V.rc("options",e.countryList),V.Db(1),V.rc("displayError",e.isFieldValid("country_code")),V.Db(9),V.rc("ngIf",n.checked),V.Db(1),V.rc("displayError",e.isFieldValid("interest_rate")),V.Db(7),V.rc("options",e.institutions_list),V.Db(1),V.rc("displayError",e.isFieldValid("financier_id")),V.Db(7),V.rc("binary",!0),V.Db(4),V.rc("binary",!0),V.Db(4),V.rc("binary",!0),V.Db(6),V.rc("readonly",!a.checked),V.Db(14),V.rc("disabled",!a.checked)("options",e.currencies_list),V.Db(16),V.rc("readonly",!r.checked),V.Db(16),V.rc("readonly",!i.checked),V.Db(16),V.rc("displayError",e.isFieldValid("required_tenure")),V.Db(9),V.rc("formGroup",e.rateAddForm),V.Db(1),V.rc("multiple",!0),V.Db(18),V.rc("ngForOf",e.addRates().controls),V.Db(21),V.Rc(e.alertBody),V.Db(10),V.Rc(e.alertBody),V.Db(18),V.rc("value",e.currentRateNo)("disabled",!0),V.Db(5),V.rc("value",e.currentRateStart)("disabled",!0),V.Db(5),V.rc("value",e.currentRateEnd)("disabled",!0),V.Db(5),V.rc("value",e.currentRateType)("disabled",!0),V.Db(3),V.rc("formGroup",e.rateDatailAddForm),V.Db(1),V.rc("multiple",!0),V.Db(11),V.rc("ngForOf",e.addRateDetails().controls)}},directives:[p.z,p.q,p.j,p.c,p.p,p.h,w,ct.a,P.a,u.a,s.p,pt.a,p.u,ut.a,mt.a,mt.c,p.d,s.o,f.f,f.e,c.a,p.k],styles:["","opp-opportunity-booking[_ngcontent-%COMP%]{width:100%}.card[_ngcontent-%COMP%], .card-header[_ngcontent-%COMP%]{border-radius:0}.card-header[_ngcontent-%COMP%]{background-color:#898485;color:#fff}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-header{font-size:24px;font-weight:bolder;background:#fff}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-header span.pi{margin-top:-8px;position:absolute;right:.5em;top:50%}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-header .p-accordion-header-link{background:#fff}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-content{padding:0}td[_ngcontent-%COMP%]{text-align:center}  .nav-link.active{background:#2297e6!important;color:#fff!important}  .nav-tabs .nav-link{border:none!important;border-left:1px solid!important}.bg-lightgrey[_ngcontent-%COMP%]{background:#fcfcfc}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   td[_ngcontent-%COMP%], .no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   th[_ngcontent-%COMP%]{border-top:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%], .no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   th[_ngcontent-%COMP%]{border-bottom:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-left:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-right:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{border-left:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{border-right:none!important}.btn-custom[_ngcontent-%COMP%]{background-color:#00538a;border-color:#00538a;color:#fff}.chead[_ngcontent-%COMP%]{font-size:24px;line-height:34px;font-style:normal;font-weight:600}.btn-icon[_ngcontent-%COMP%]{height:2rem;line-height:1rem;padding:0!important;width:2rem;font-size:1.2rem!important;font-weight:700;border-radius:50%;text-align:center}.btn-in-tab[_ngcontent-%COMP%]{position:absolute;right:-3.5rem;height:1.5rem!important;line-height:.75rem;width:1.5rem!important;font-size:.9rem}.btn-white[_ngcontent-%COMP%]{color:#fff;border-color:#fff}.btn-white[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-top:.2rem}.p-relative[_ngcontent-%COMP%]{position:relative}.p-0[_ngcontent-%COMP%]{padding:0!important}.p-125[_ngcontent-%COMP%]{padding:1.25rem}.b-btm-green[_ngcontent-%COMP%]{border-bottom:3px solid #5dbec0}.bg-opp[_ngcontent-%COMP%]{background-color:#5dbec0}.table-price[_ngcontent-%COMP%]{border-radius:30px}[_nghost-%COMP%]     .p-paginator .p-paginator-current{margin-left:auto}[_nghost-%COMP%]     .p-progressbar{height:.5rem;background-color:#d8dadc}[_nghost-%COMP%]     .p-progressbar .p-progressbar-value{background-color:#607d8b}[_nghost-%COMP%]     .table-header{display:flex;justify-content:space-between}[_nghost-%COMP%]     .p-calendar .p-datepicker{min-width:25rem}[_nghost-%COMP%]     .p-calendar .p-datepicker td{font-weight:400}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-header{padding:1rem;text-align:left;font-size:1.5rem;background-color:#898485;color:#fff}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-paginator{padding:1rem}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-thead>tr>th{text-align:left}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr>td{cursor:auto}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-dropdown-label:not(.p-placeholder){text-transform:uppercase}[_nghost-%COMP%]     .p-datatable-opportunity .p-datatable-tbody>tr>td .p-column-title{display:none}[_nghost-%COMP%]     .p-calendar, [_nghost-%COMP%]     .p-inputnumber{width:100%}[_nghost-%COMP%]     p-checkbox+label{display:inline-block;margin-bottom:0;padding-left:5px}[_nghost-%COMP%]     .p-disabled{background-color:#e4e7ea;opacity:1}[_nghost-%COMP%]     .p-dropdown .p-dropdown-label{padding:0}[_nghost-%COMP%]     table#sku_rate{width:95%;margin:auto}[_nghost-%COMP%]     table#sku_rate_datails{width:92.5%;margin:0 auto}.fa[_ngcontent-%COMP%], .icon-plus[_ngcontent-%COMP%]{cursor:pointer}.custom-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;padding:0 25px}@media screen and (max-width:960px){[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tfoot>tr>td, [_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-thead>tr>th{display:none!important}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr{border-bottom:1px solid var(--layer-2)}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr>td{text-align:left;display:block;border:0!important;width:100%!important;float:left;clear:left;border:0}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr>td .p-column-title{padding:.4rem;min-width:30%;display:inline-block;margin:-.4rem 1rem -.4rem -.4rem;font-weight:700}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr>td .p-progressbar{margin-top:.5rem}}"]}),Dt),xt=["successModal"],Et=["dangerModal"],Nt=["foundModal"],qt=["createModal"],Ut=["fpsEditFormContainer"];function Lt(t,e){if(1&t){var o=V.Xb();V.Wb(0,"tr",106),V.Wb(1,"td",107),V.Rb(2,"input",108),V.Vb(),V.Wb(3,"td",107),V.Rb(4,"input",109),V.Vb(),V.Wb(5,"td",110),V.Rb(6,"p-dropdown",111),V.Vb(),V.Wb(7,"td",107),V.Rb(8,"input",112),V.Vb(),V.Wb(9,"td",113),V.Rb(10,"i",114),V.Qc(11," \xa0 "),V.Wb(12,"i",115),V.gc("click",function(){V.Fc(o);var t=e.index;return V.kc(2).removeAddMinProcedure(t)}),V.Vb(),V.Vb(),V.Vb()}if(2&t){var n=e.index,a=V.kc(2);V.rc("formGroupName",n),V.Db(6),V.rc("options",a.fps_user_list)}}function Tt(t,e){if(1&t){var o=V.Xb();V.Wb(0,"div",7),V.Wb(1,"div",25),V.Wb(2,"div",96),V.Wb(3,"h2"),V.Qc(4,"Procedure Usage "),V.Vb(),V.Vb(),V.Wb(5,"div",97),V.Wb(6,"label",98),V.Qc(7," Minimum Procedure "),V.Vb(),V.Vb(),V.Wb(8,"div",11),V.Rb(9,"input",99),V.Vb(),V.Vb(),V.Wb(10,"div",52),V.Wb(11,"form",100),V.Wb(12,"div",2),V.Wb(13,"table",101),V.Wb(14,"thead"),V.Wb(15,"tr"),V.Wb(16,"th"),V.Qc(17,"Date"),V.Vb(),V.Wb(18,"th"),V.Qc(19,"No. Of Procedure"),V.Vb(),V.Wb(20,"th"),V.Qc(21,"Updated By"),V.Vb(),V.Wb(22,"th"),V.Qc(23,"Updated On"),V.Vb(),V.Rb(24,"th"),V.Vb(),V.Vb(),V.Wb(25,"tbody"),V.Oc(26,Lt,13,2,"tr",102),V.Vb(),V.Wb(27,"tfoot",103),V.Wb(28,"tr"),V.Wb(29,"td",104),V.Wb(30,"i",105),V.gc("click",function(){return V.Fc(o),V.kc().addAddMinProcedure()}),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb()}if(2&t){var n=V.kc();V.Db(9),V.rc("readonly",!0),V.Db(2),V.rc("formGroup",n.minProcedureAddForm),V.Db(15),V.rc("ngForOf",n.addMinProcedure().controls)}}function It(t,e){if(1&t){var o=V.Xb();V.Wb(0,"tr",106),V.Wb(1,"td",107),V.Rb(2,"input",108),V.Vb(),V.Wb(3,"td",107),V.Rb(4,"input",118),V.Vb(),V.Wb(5,"td",110),V.Rb(6,"p-dropdown",111),V.Vb(),V.Wb(7,"td",107),V.Rb(8,"input",112),V.Vb(),V.Wb(9,"td",113),V.Rb(10,"i",114),V.Qc(11," \xa0 "),V.Wb(12,"i",115),V.gc("click",function(){V.Fc(o);var t=e.index;return V.kc(2).removeAddMinUsage(t)}),V.Vb(),V.Vb(),V.Vb()}if(2&t){var n=e.index,a=V.kc(2);V.rc("formGroupName",n),V.Db(6),V.rc("options",a.fps_user_list)}}function zt(t,e){if(1&t){var o=V.Xb();V.Wb(0,"div",7),V.Wb(1,"div",25),V.Wb(2,"div",96),V.Wb(3,"h2"),V.Qc(4,"Consumable Usage "),V.Vb(),V.Vb(),V.Wb(5,"div",97),V.Wb(6,"label",98),V.Qc(7," Minimum Usage "),V.Vb(),V.Vb(),V.Wb(8,"div",11),V.Rb(9,"input",116),V.Vb(),V.Vb(),V.Wb(10,"div",52),V.Wb(11,"form",100),V.Wb(12,"div",2),V.Wb(13,"table",117),V.Wb(14,"thead"),V.Wb(15,"tr"),V.Wb(16,"th"),V.Qc(17,"Date"),V.Vb(),V.Wb(18,"th"),V.Qc(19,"Usage"),V.Vb(),V.Wb(20,"th"),V.Qc(21,"Updated By"),V.Vb(),V.Wb(22,"th"),V.Qc(23,"Updated On"),V.Vb(),V.Rb(24,"th"),V.Vb(),V.Vb(),V.Wb(25,"tbody"),V.Oc(26,It,13,2,"tr",102),V.Vb(),V.Wb(27,"tfoot",103),V.Wb(28,"tr"),V.Wb(29,"td",104),V.Wb(30,"i",105),V.gc("click",function(){return V.Fc(o),V.kc().addAddMinUsage()}),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb()}if(2&t){var n=V.kc();V.Db(9),V.rc("readonly",!0),V.Db(2),V.rc("formGroup",n.minUsageAddForm),V.Db(15),V.rc("ngForOf",n.addMinUsage().controls)}}function Gt(t,e){if(1&t&&(V.Wb(0,"tr",103),V.Wb(1,"td"),V.Qc(2),V.Vb(),V.Wb(3,"td",119),V.Wb(4,"span"),V.Wb(5,"a",120),V.Qc(6),V.Vb(),V.Vb(),V.Vb(),V.Wb(7,"td"),V.Qc(8),V.Vb(),V.Wb(9,"td",119),V.Wb(10,"span"),V.Qc(11),V.lc(12,"date"),V.Vb(),V.Vb(),V.Wb(13,"td"),V.Qc(14),V.Vb(),V.Wb(15,"td"),V.Qc(16),V.lc(17,"date"),V.Vb(),V.Wb(18,"td"),V.Qc(19),V.Vb(),V.Wb(20,"td",121),V.Wb(21,"span"),V.Qc(22),V.Vb(),V.Vb(),V.Wb(23,"td",122),V.Rb(24,"i",123),V.Vb(),V.Vb()),2&t){var o=e.$implicit,n=e.index,a=V.kc();V.Db(2),V.Rc(n+1),V.Db(4),V.Rc(o.file_name),V.Db(2),V.Rc(a.showFileType(o.file_type)),V.Db(3),V.Rc(V.nc(12,8,o.file_valid_until,"dd-MMM-yyyy")),V.Db(3),V.Rc(a.showUser(o.file_uploaded_by)),V.Db(2),V.Rc(V.nc(17,11,o.file_uploaded_on,"dd-MMM-yyyy")),V.Db(3),V.Rc(a.convertSize(o.file_size)),V.Db(3),V.Rc(o.file_ramark)}}var Bt,jt,Kt,Xt=[{path:"fps-listing",component:_.a},{path:"fps-create",component:L},{path:":id/fps-edit",component:(Bt=function(){function e(o,n,a,r,i,d,s,l,b){t(this,e),this.fb=o,this.fpsService=n,this.appService=a,this.institutionService=r,this.zone=i,this.dialogService=d,this.route=s,this.currencyService=l,this.router=b,this.agreement_mandatory=!1,this.existingProcedureIds=[],this.existingConsumeIds=[],this.formData=new FormData,this.fileList=[],this.payment_frequency_list=[{value:"monthly_payment",label:"Monthly"},{value:"quarterly_payment",label:"Quarterly"},{value:"half_yearly_payment",label:"Half-yearly"}],this.tenure_list=[],this.countryCode=null,this.has_consumable_usage=!1,this.has_min_procedure=!1,this.oppt_details={opportunity_code:"",created_at:"",currency_code:"",amount:"",customer:""},this.fpsTypeList=this.fpsService.getTransSactionTypeList(),this.fpsStatusList=this.fpsService.getFpsStatusList(),this.fileTypeList=this.fpsService.getFileTypeList()}return o(e,[{key:"form_controls",get:function(){return this.fpsEditForm.controls}},{key:"ngOnInit",value:function(){var t=this;this.route.paramMap.subscribe(function(e){e.get("id")&&(t.fpsID=e.get("id"))}),this.minProcedureAddForm=this.fb.group({addMinProcedure:this.fb.array([])}),this.minUsageAddForm=this.fb.group({addMinUsage:this.fb.array([])}),this.fileUploadForm=this.fb.group({file_name:new p.f("test 1"),file_uploaded_by:new p.f(1),file_type:new p.f(1),file_valid_until:new p.f,file_ramark:new p.f("My remark"),file:new p.f(null)}),this.fpsEditForm=this.fb.group({fps_no:new p.f("",[p.y.required]),fps_opportunity_id:new p.f,fps_quote_id:new p.f,fps_customer_name:new p.f,fps_soci_uuid:new p.f,fps_transaction_type_id:new p.f(1,[p.y.min(1)]),fps_financier_id:new p.f("",[p.y.required,p.y.min(1)]),fps_payment_frequency:new p.f("",[p.y.required]),fps_status_id:new p.f(1,[p.y.min(1)]),fps_tenure_id:new p.f("",[p.y.required]),fps_adv_payment:new p.f(0),fps_adv_payment_percentage:new p.f(0),fps_net_financing_amount:new p.f(0),fps_monthly_payment_amount:new p.f,fps_interest_rate:new p.f,fps_validated_by:new p.f,fps_approved_by:new p.f,fps_leas_aggr_no:new p.f(0),fps_internal_aggr_no:new p.f,fps_remarks:new p.f,fps_currency_code:new p.f,fps_total_financial_amount:new p.f,fps_min_payment_amount:new p.f,fps_required_docs:new p.f,fps_data_area_id:new p.f,fps_consumable_usage:new p.f,fps_min_procedure:new p.f}),this.route.queryParams.subscribe(function(e){t.current_apportunity_id=e.opport_id,t.fpsEditForm.controls.fps_opportunity_id.setValue(t.current_apportunity_id),t.current_quot_id=e.quot_id,t.fpsEditForm.controls.fps_quote_id.setValue(t.current_quot_id)}),this.appService.getQuery("/opportunity/detail/"+this.current_apportunity_id,null).subscribe(function(e){t.oppt_details=e.data,t.fpsEditForm.controls.fps_currency_code.setValue(t.oppt_details.currency_code),t.fpsEditForm.controls.fps_total_financial_amount.setValue(t.oppt_details.amount),t.fpsEditForm.controls.fps_data_area_id.setValue(t.oppt_details.customer.data_area_id),t.loadUsers(),t.currencyService.getCountryCodeFromCurrency(t.oppt_details.currency_code).subscribe({next:function(e){e.success&&t.zone.run(function(){t.countryCode=e.data.iso3,t.loadFpsDetails()})}})})}},{key:"onSave",value:function(){var t=this;if(!this.fpsEditForm.valid)return this.fpsService.validateAllFormFields(this.fpsEditForm),void this.fpsEditFormContainerRef.nativeElement.scrollIntoView({behavior:"smooth"});this.fpsService.updateFps({fps_no:this.fpsEditForm.get("fps_no").value+"",fps_opportunity_id:this.fpsEditForm.get("fps_opportunity_id").value+"",fps_quote_id:this.fpsEditForm.get("fps_quote_id").value+"",fps_transaction_type_id:this.fpsEditForm.get("fps_transaction_type_id").value+"",fps_payment_frequency:this.fpsEditForm.get("fps_payment_frequency").value+"",fps_financier_id:this.fpsEditForm.get("fps_financier_id").value+"",fps_adv_payment:this.fpsEditForm.get("fps_adv_payment").value+"",fps_adv_payment_percentage:this.fpsEditForm.get("fps_adv_payment_percentage").value+"",fps_total_financial_amount:this.fpsEditForm.get("fps_total_financial_amount").value+"",fps_net_financing_amount:this.fpsEditForm.get("fps_net_financing_amount").value+"",fps_monthly_payment_amount:this.fpsEditForm.get("fps_monthly_payment_amount").value+"",fps_tenure_id:this.fpsEditForm.get("fps_tenure_id").value+"",fps_interest_rate:this.fpsEditForm.get("fps_interest_rate").value+"",fps_status_id:this.fpsEditForm.get("fps_status_id").value+"",fps_validated_by:this.fpsEditForm.get("fps_validated_by").value,fps_approved_by:this.fpsEditForm.get("fps_approved_by").value,fps_leas_aggr_no:this.fpsEditForm.get("fps_leas_aggr_no").value+"",fps_remarks:this.fpsEditForm.get("fps_remarks").value+"",fps_required_docs:this.fpsEditForm.get("fps_required_docs").value+"",fps_customer_name:this.oppt_details.customer.owner+"",fps_internal_aggr_no:"",fps_data_area_id:this.fpsEditForm.get("fps_data_area_id").value+""},this.fpsID).subscribe(function(e){if(e.id){for(var o=t.minProcedureAddForm.value.addMinProcedure,n=[],a=0;a<o.length;a++)n.push({id:t.existingProcedureIds.includes(o[a].id)?o[a].id:null,fps_id:e.id,date:o[a].date,no_procedure:o[a].no_procedure,updated_by:o[a].updated_by,updated_on:o[a].updated_on});n.length>0&&t.fpsService.storeMinProcedure(n);for(var r=t.minUsageAddForm.value.addMinUsage,i=[],d=0;d<r.length;d++)i.push({id:t.existingConsumeIds.includes(r[d].id)?r[d].id:null,fps_id:e.id,date:r[d].date,usage:r[d].usage,updated_by:r[d].updated_by,updated_on:r[d].updated_on});i.length>0&&t.fpsService.storeMinUsage(i),t.alertBody="FPS updated successfully.",t.successModal.show(),setTimeout(function(){t.successModal.hide()},2e3),t.router.navigateByUrl("/fps/fps-listing",{replaceUrl:!0})}},function(e){console.log(e),t.alertBody="The FPS can't save",t.dangerModal.show(),setTimeout(function(){t.dangerModal.hide()},2e3)})}},{key:"onChangeAdvancePayment",value:function(){var t=this.fpsEditForm.controls.fps_total_financial_amount.value,e=t/100*this.fpsEditForm.controls.fps_adv_payment_percentage.value;this.fpsEditForm.controls.fps_adv_payment.setValue(e),this.fpsEditForm.controls.fps_net_financing_amount.setValue(t-e)}},{key:"updateInterestRate",value:function(){var t,e=this.getFilteredCodes(this.tenure_list,"id",this.fpsEditForm.controls.fps_tenure_id.value);e.length>1&&(this.fpsEditForm.controls.fps_interest_rate.setValue(e[0].details_interest_rate),this.fpsEditForm.controls.fps_min_payment_amount.setValue(e[0].min_payment_amount),this.fpsEditForm.controls.fps_required_docs.setValue(null!==(t=e[0].required_docs)&&void 0!==t?t:""),this.fpsEditForm.controls.fps_consumable_usage.setValue(e[0].consumable_usage),this.fpsEditForm.controls.fps_min_procedure.setValue(e[0].min_procedure),this.has_consumable_usage=e[0].consumable_usage>0,this.has_min_procedure=e[0].min_procedure>0,this.agreement_mandatory=0!=e[0].agreement_mandatory,this.updateMontlyPayment())}},{key:"updateMontlyPayment",value:function(){var t=parseFloat(this.fpsEditForm.controls.fps_total_financial_amount.value),e=parseFloat(this.fpsEditForm.controls.fps_interest_rate.value),o=parseFloat(this.fpsEditForm.controls.fps_tenure_id.value);this.fpsEditForm.controls.fps_monthly_payment_amount.setValue((t*(1+e/12*o)/o).toFixed(2))}},{key:"updateTenure",value:function(){var t=this;this.countryCode.length>0&&this.loadFinancialInstitutions();var e=this.fpsEditForm.controls.fps_financier_id.value,o=this.fpsEditForm.controls.fps_payment_frequency.value,n=this.fpsEditForm.controls.fps_transaction_type_id.value;n&&e&&o&&this.fpsService.getTenureList(n,e,o).subscribe(function(e){e.unshift(e.length>0?{id:"",details_tenure:"Select Tenure"}:{id:"",details_tenure:"No Tenure Available"}),t.tenure_list=e,t.updateInterestRate()},function(t){console.log(t)})}},{key:"loadFinancialInstitutions",value:function(){var t=this;this.institutionService.getFinancialInstition(this.countryCode).subscribe({next:function(e){e.success?t.zone.run(function(){t.institutions_list=e.data.institutions}):t.dialogService.showErrorDialog(e.message)},error:function(e){t.dialogService.showErrorDialog(null!=e.error.message?e.error.message:"Error retrieve institutions list")}})}},{key:"getFilteredCodes",value:function(t,e,o){return t.filter(function(t){return t[e]==o})}},{key:"isFieldValid",value:function(t){return!this.fpsEditForm.get(t).valid&&this.fpsEditForm.get(t).touched}},{key:"loadUsers",value:function(){var t=this;this.fpsService.getUsersList().subscribe(function(e){t.fps_user_list=e.data})}},{key:"loadFpsDetails",value:function(){var t=this;this.fpsService.find(this.fpsID).subscribe(function(e){t.updateTenure(),t.fpsEditForm.patchValue(e.data),e.data.min_procedures.forEach(function(e){t.has_min_procedure=!0,t.addMinProcedure().push(t.existingMinProcedure(e)),t.existingProcedureIds.push(e.id)}),e.data.min_usages.forEach(function(e){t.has_consumable_usage=!0,t.addMinUsage().push(t.existingMinUsage(e)),t.existingConsumeIds.push(e.id)}),e.data.files.forEach(function(e){t.fileList.push(e)}),t.updateTenure()})}},{key:"addMinProcedure",value:function(){return this.minProcedureAddForm.get("addMinProcedure")}},{key:"newMinProcedure",value:function(){return this.fb.group({id:"",date:"",no_procedure:12,updated_by:1,updated_on:""})}},{key:"addAddMinProcedure",value:function(){this.addMinProcedure().push(this.newMinProcedure())}},{key:"removeAddMinProcedure",value:function(t){this.addMinProcedure().removeAt(t)}},{key:"existingMinProcedure",value:function(t){return this.fb.group({id:t.id,date:t.date,no_procedure:t.no_procedure,updated_by:t.updated_by,updated_on:t.updated_on})}},{key:"addMinUsage",value:function(){return this.minUsageAddForm.get("addMinUsage")}},{key:"newMinUsage",value:function(){return this.fb.group({date:"",usage:12,updated_by:1,updated_on:""})}},{key:"addAddMinUsage",value:function(){this.addMinUsage().push(this.newMinUsage())}},{key:"removeAddMinUsage",value:function(t){this.addMinUsage().removeAt(t)}},{key:"existingMinUsage",value:function(t){return this.fb.group({id:t.id,date:t.date,usage:t.usage,updated_by:t.updated_by,updated_on:t.updated_on})}},{key:"resetForm",value:function(){}},{key:"onFileSelect",value:function(t){var e=this;if(this.file=t.target.files[0],this.file){var o=new FileReader;o.readAsDataURL(this.file),o.onload=function(t){e.url=o.result},this.formData.append("file",this.file)}}},{key:"createFile",value:function(){this.fileAddFormModal.show()}},{key:"fileUpload",value:function(){var t={file_name:this.fileUploadForm.get("file_name").value,file_type:this.fileUploadForm.get("file_type").value,file_valid_until:this.fileUploadForm.get("file_valid_until").value,file_uploaded_by:this.fileUploadForm.get("file_uploaded_by").value,file_uploaded_on:new Date,file_ramark:this.fileUploadForm.get("file_ramark").value,file_size:this.file.size};this.fileList.push(t),this.formData.append("file_name",this.fileUploadForm.get("file_name").value),this.formData.append("file_type",this.fileUploadForm.get("file_type").value),this.formData.append("file_valid_until",this.fileUploadForm.get("file_valid_until").value),this.formData.append("file_uploaded_by",this.fileUploadForm.get("file_uploaded_by").value),this.formData.append("file_ramark",this.fileUploadForm.get("file_valid_until").value),this.formData.append("fps_id",this.fpsID),this.formData.append("file_size",this.convertSize(this.file.size)),this.fpsService.storeFileLibrary(this.formData),this.fileAddFormModal.hide()}},{key:"showFileType",value:function(t){return this.fileTypeList.find(function(e){return e.id==t}).title}},{key:"showUser",value:function(t){return this.fps_user_list.find(function(e){return e.id==t}).full_name}},{key:"convertSize",value:function(t){return"number"==typeof t?this.fpsService.humanFileSize(t):t}}]),e}(),Bt.\u0275fac=function(t){return new(t||Bt)(V.Qb(p.e),V.Qb(h.a),V.Qb(W),V.Qb(M),V.Qb(V.A),V.Qb(g.a),V.Qb(f.a),V.Qb(k),V.Qb(f.c))},Bt.\u0275cmp=V.Kb({type:Bt,selectors:[["app-edit"]],viewQuery:function(t,e){var o;1&t&&(V.Vc(xt,1),V.Vc(Et,1),V.Vc(Nt,1),V.Vc(qt,1),V.Vc(Ut,1)),2&t&&(V.Cc(o=V.hc())&&(e.successModal=o.first),V.Cc(o=V.hc())&&(e.dangerModal=o.first),V.Cc(o=V.hc())&&(e.foundModal=o.first),V.Cc(o=V.hc())&&(e.fileAddFormModal=o.first),V.Cc(o=V.hc())&&(e.fpsEditFormContainerRef=o.first))},features:[V.Cb([W])],decls:295,vars:28,consts:[[1,"animated","fadeIn"],["id","fpsEditForm",1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-sm-12","col-md-12"],[1,"card"],[1,"card-header","d-flex","b-btm-green"],[1,"chead"],[1,"card-body"],[1,"card-row"],[1,"lead-data"],[1,"lead-header"],[1,"col-md-3"],[1,"form-group"],[1,"bold"],[1,"col-md-3","lead-id"],[1,"bg-opp","text-white","p-1"],["type","hidden","formControlName","fps_no",1,"form-control"],["formControlName","fps_transaction_type_id","optionLabel","title","optionValue","id","styleClass","form-control","emptyMessage","No FPS Type Available",3,"options","onChange"],["formControlName","fps_status_id","optionLabel","title","optionValue","id","styleClass","form-control","emptyMessage","No FPS Status Available",3,"options"],[1,"details","grey"],["type","hidden","formControlName","fps_opportunity_id",1,"form-control"],["type","hidden","formControlName","fps_data_area_id","title","fps_data_area_id",1,"form-control"],["fpsEditFormContainer",""],[1,"col-md-12"],[1,"mb-4"],[1,"form-group","row"],["for","booking-reason",1,"col-md-2","col-form-label"],[1,"asterisk"],[1,"col-md-4"],["formControlName","fps_payment_frequency","optionLabel","label","optionValue","value","styleClass","form-control","placeholder","Select Frequency","id","fps_payment_frequency","emptyMessage","No Payment Frequency Available",3,"options","onChange"],["errorMsg","Payment Frequency is required.",3,"displayError"],["formControlName","fps_tenure_id","id","fps_tenure_id","optionLabel","details_tenure","optionValue","id","styleClass","form-control",3,"options","onChange"],["errorMsg","Tenure is required.",3,"displayError"],["formControlName","fps_financier_id","id","fps_financier_id","optionLabel","title","optionValue","id","styleClass","form-control","placeholder","Select Institution","emptyMessage","No Institution Available",3,"options","onChange"],["errorMsg","Financial Instititue is required.",3,"displayError"],["type","number","step","0.1","formControlName","fps_interest_rate",1,"form-control",3,"change"],["type","text","formControlName","fps_currency_code",1,"form-control",3,"readonly"],["type","number","formControlName","fps_monthly_payment_amount",1,"form-control"],["type","number","formControlName","fps_total_financial_amount",1,"form-control"],["type","number","formControlName","fps_min_payment_amount",1,"form-control"],[1,"col-md-6"],["for","booking-reason",1,"col-md-4","col-form-label"],[1,"col-md-8"],["type","number","step","0.1","formControlName","fps_adv_payment_percentage",1,"form-control",3,"change"],["type","number","formControlName","fps_adv_payment",1,"form-control"],["type","number","formControlName","fps_net_financing_amount",1,"form-control"],["formControlName","fps_remarks","rows","9",1,"form-control"],["formControlName","fps_validated_by","optionLabel","full_name","optionValue","id","styleClass","form-control","placeholder","Select User","emptyMessage","No User Available",3,"options"],["type","text","formControlName","fps_leas_aggr_no",1,"form-control",3,"readonly"],["formControlName","fps_approved_by","optionLabel","full_name","optionValue","id","styleClass","form-control","placeholder","Select User","emptyMessage","No User Available",3,"options"],["formControlName","fps_required_docs","rows","9",1,"form-control"],["class","card-body",4,"ngIf"],[1,"col-sm-12","col-md-12","form-group"],[1,"table","table-borderless","table-hover"],["align","center",4,"ngFor","ngForOf"],["colspan","8",1,"td-actions",2,"text-align","left"],["type","button",1,"btn","btn-sm","btn-primary",3,"click"],[1,"icon-cloud-upload","icons"],[1,"custom-footer","d-flex","justify-content-center"],["type","button",1,"btn","btn-light"],["type","button",1,"btn","btn-sm","btn-light"],["type","submit","form","fpsEditForm",1,"btn","btn-sm","btn-primary"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade",3,"onHide"],["createModal","bs-modal"],["role","document",1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"formGroup","ngSubmit"],[1,"col-lg-3"],["for","quote_id"],[1,"col-lg-9"],["formControlName","file_name","type","text",1,"form-control"],["for","po_date"],["formControlName","file_uploaded_by","optionLabel","full_name","optionValue","id","styleClass","form-control","placeholder","Select User","emptyMessage","No User Available",3,"options"],["for","po_no"],["formControlName","file_type","optionLabel","title","optionValue","id","styleClass","form-control","placeholder","Select Type",3,"options"],["for","receive_po_date"],["formControlName","file_valid_until","type","date",1,"form-control"],["for","po_amount"],["formControlName","file","type","file",1,"form-control",3,"change"],["for","attachment"],["formControlName","file_ramark","rows","9",1,"form-control"],[1,"modal-footer"],[1,"form-group","row",2,"width","100%","text-align","center"],[1,"col-lg-12"],["type","submit",1,"btn","btn-primary"],["id","success","bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["successModal","bs-modal"],["role","document",1,"modal-dialog","modal-success"],["bsModal","","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade"],["dangerModal","bs-modal"],["role","document",1,"modal-dialog","modal-danger"],[1,"col-md-7"],[1,"col-md-2"],["for","booking-reason",1,"col-form-label"],["type","text","formControlName","fps_min_procedure",1,"form-control",3,"readonly"],[3,"formGroup"],["formArrayName","addMinProcedure",1,"table","table-striped"],["align","center",3,"formGroupName",4,"ngFor","ngForOf"],["align","center"],["colspan","9","align","center",1,"td-actions"],[1,"icon-plus","icons",3,"click"],["align","center",3,"formGroupName"],[2,"width","15%"],["formControlName","date","type","date",1,"form-control"],["formControlName","no_procedure","size","1","type","number",1,"form-control"],[2,"width","10%"],["formControlName","updated_by","optionLabel","full_name","optionValue","id","styleClass","form-control","placeholder","Select User","emptyMessage","No User Available",3,"options"],["formControlName","updated_on","type","date",1,"form-control"],[1,"td-actions",2,"width","10%"],[1,"fa","fa-edit"],[1,"fa","fa-trash",3,"click"],["type","text","formControlName","fps_consumable_usage",1,"form-control",3,"readonly"],["formArrayName","addMinUsage",1,"table","table-striped"],["formControlName","usage","size","1","type","number",1,"form-control"],[1,"bordered"],["href","#"],[1,"bordered",2,"width","15%"],[1,"td-actions",2,"width","5%"],[1,"fa","fa-trash"]],template:function(t,e){if(1&t){var o=V.Xb();V.Wb(0,"div",0),V.Wb(1,"form",1),V.gc("ngSubmit",function(){return e.onSave()}),V.Wb(2,"div",2),V.Wb(3,"div",3),V.Wb(4,"div",4),V.Wb(5,"div",5),V.Wb(6,"div",6),V.Qc(7,"Edit FPS Request Form"),V.Vb(),V.Vb(),V.Wb(8,"div",7),V.Wb(9,"div",8),V.Wb(10,"div",9),V.Wb(11,"div",10),V.Wb(12,"div",2),V.Wb(13,"div",11),V.Wb(14,"div",12),V.Wb(15,"h3",13),V.Qc(16),V.Vb(),V.Vb(),V.Vb(),V.Wb(17,"div",14),V.Wb(18,"div",12),V.Wb(19,"label",13),V.Qc(20,"FPS Request No."),V.Vb(),V.Wb(21,"div",15),V.Qc(22),V.Vb(),V.Wb(23,"span"),V.Rb(24,"input",16),V.Vb(),V.Vb(),V.Vb(),V.Wb(25,"div",11),V.Wb(26,"div",12),V.Wb(27,"label",13),V.Qc(28,"Transaction Type"),V.Vb(),V.Wb(29,"p-dropdown",17),V.gc("onChange",function(){return e.updateTenure()}),V.Vb(),V.Vb(),V.Vb(),V.Wb(30,"div",11),V.Wb(31,"div",12),V.Wb(32,"label",13),V.Qc(33,"Status"),V.Vb(),V.Rb(34,"p-dropdown",18),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Wb(35,"div",19),V.Wb(36,"div",2),V.Wb(37,"div",11),V.Wb(38,"div",12),V.Wb(39,"label",13),V.Qc(40,"Created Date"),V.Vb(),V.Wb(41,"div"),V.Qc(42),V.lc(43,"date"),V.Vb(),V.Vb(),V.Vb(),V.Wb(44,"div",11),V.Wb(45,"div",12),V.Wb(46,"label",13),V.Qc(47,"Opportunity ID "),V.Vb(),V.Wb(48,"div"),V.Qc(49),V.Rb(50,"input",20),V.Rb(51,"input",21),V.Vb(),V.Vb(),V.Vb(),V.Wb(52,"div",11),V.Wb(53,"div",12),V.Wb(54,"label",13),V.Qc(55,"Quote ID (Version)"),V.Vb(),V.Wb(56,"div"),V.Qc(57," ... "),V.Vb(),V.Vb(),V.Vb(),V.Wb(58,"div",11),V.Wb(59,"div",12),V.Wb(60,"label",13),V.Qc(61,"SOCI No."),V.Vb(),V.Wb(62,"div"),V.Qc(63," ... "),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Wb(64,"div",2,22),V.Wb(66,"div",23),V.Wb(67,"div",4),V.Wb(68,"div",7),V.Wb(69,"div",24),V.Wb(70,"h2"),V.Qc(71,"General"),V.Vb(),V.Vb(),V.Wb(72,"div",25),V.Wb(73,"label",26),V.Qc(74," Payment Frequency"),V.Wb(75,"span",27),V.Qc(76," * "),V.Vb(),V.Vb(),V.Wb(77,"div",28),V.Wb(78,"p-dropdown",29),V.gc("onChange",function(){return e.updateTenure()}),V.Vb(),V.Rb(79,"app-form-error-presentation",30),V.Vb(),V.Wb(80,"label",26),V.Qc(81," Tenure "),V.Vb(),V.Wb(82,"div",28),V.Wb(83,"p-dropdown",31),V.gc("onChange",function(){return e.updateInterestRate()}),V.Vb(),V.Rb(84,"app-form-error-presentation",32),V.Vb(),V.Vb(),V.Wb(85,"div",25),V.Wb(86,"label",26),V.Qc(87," Financial Instititue"),V.Wb(88,"span",27),V.Qc(89," * "),V.Vb(),V.Vb(),V.Wb(90,"div",28),V.Wb(91,"p-dropdown",33),V.gc("onChange",function(){return e.updateTenure()}),V.Vb(),V.Rb(92,"app-form-error-presentation",34),V.Vb(),V.Wb(93,"label",26),V.Qc(94," Interest % "),V.Vb(),V.Wb(95,"div",28),V.Wb(96,"input",35),V.gc("change",function(){return e.updateMontlyPayment()}),V.Vb(),V.Vb(),V.Vb(),V.Wb(97,"div",25),V.Wb(98,"label",26),V.Qc(99," Currency"),V.Wb(100,"span",27),V.Qc(101," * "),V.Vb(),V.Vb(),V.Wb(102,"div",28),V.Rb(103,"input",36),V.Vb(),V.Wb(104,"label",26),V.Qc(105," Monthly Payment Amount "),V.Vb(),V.Wb(106,"div",28),V.Rb(107,"input",37),V.Vb(),V.Vb(),V.Wb(108,"div",25),V.Wb(109,"label",26),V.Qc(110," Total Financial Amount"),V.Wb(111,"span",27),V.Qc(112," * "),V.Vb(),V.Vb(),V.Wb(113,"div",28),V.Rb(114,"input",38),V.Vb(),V.Wb(115,"label",26),V.Qc(116," Min Payment Amount "),V.Vb(),V.Wb(117,"div",28),V.Rb(118,"input",39),V.Vb(),V.Vb(),V.Wb(119,"div",25),V.Wb(120,"div",40),V.Wb(121,"div",25),V.Wb(122,"label",41),V.Qc(123," Advance Payment (%) "),V.Vb(),V.Wb(124,"div",42),V.Wb(125,"input",43),V.gc("change",function(){return e.onChangeAdvancePayment()}),V.Vb(),V.Vb(),V.Vb(),V.Wb(126,"div",25),V.Wb(127,"label",41),V.Qc(128," Advance Payment "),V.Vb(),V.Wb(129,"div",42),V.Rb(130,"input",44),V.Vb(),V.Vb(),V.Wb(131,"div",25),V.Wb(132,"label",41),V.Qc(133," Net Financing Amount "),V.Vb(),V.Wb(134,"div",42),V.Rb(135,"input",45),V.Vb(),V.Vb(),V.Vb(),V.Wb(136,"div",40),V.Wb(137,"div",25),V.Wb(138,"label",41),V.Qc(139," Remark "),V.Vb(),V.Wb(140,"div",42),V.Rb(141,"textarea",46),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Rb(142,"hr"),V.Wb(143,"div",25),V.Wb(144,"label",26),V.Qc(145," Validated By "),V.Vb(),V.Wb(146,"div",28),V.Rb(147,"p-dropdown",47),V.Vb(),V.Wb(148,"label",26),V.Qc(149," Argeement No. "),V.Vb(),V.Wb(150,"div",28),V.Rb(151,"input",48),V.Vb(),V.Vb(),V.Wb(152,"div",25),V.Wb(153,"div",40),V.Wb(154,"div",25),V.Wb(155,"label",41),V.Qc(156," Approved By "),V.Vb(),V.Wb(157,"div",42),V.Rb(158,"p-dropdown",49),V.Vb(),V.Vb(),V.Vb(),V.Wb(159,"div",40),V.Wb(160,"div",25),V.Wb(161,"label",41),V.Qc(162," Required Documents "),V.Vb(),V.Wb(163,"div",42),V.Rb(164,"textarea",50),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Rb(165,"hr"),V.Oc(166,Tt,31,3,"div",51),V.Oc(167,zt,31,3,"div",51),V.Rb(168,"br"),V.Wb(169,"div",52),V.Wb(170,"h3"),V.Qc(171,"File Library"),V.Vb(),V.Wb(172,"div",52),V.Wb(173,"div",2),V.Wb(174,"table",53),V.Wb(175,"thead"),V.Wb(176,"tr"),V.Rb(177,"th"),V.Wb(178,"th"),V.Qc(179,"File Name"),V.Vb(),V.Wb(180,"th"),V.Qc(181,"File Type"),V.Vb(),V.Wb(182,"th"),V.Qc(183,"Valid Until"),V.Vb(),V.Wb(184,"th"),V.Qc(185,"File Uploaded By"),V.Vb(),V.Wb(186,"th"),V.Qc(187,"Uploaded On"),V.Vb(),V.Wb(188,"th"),V.Qc(189,"File Size"),V.Vb(),V.Wb(190,"th"),V.Qc(191,"Remark"),V.Vb(),V.Rb(192,"th"),V.Vb(),V.Vb(),V.Wb(193,"tbody"),V.Oc(194,Gt,25,14,"tr",54),V.Vb(),V.Wb(195,"tfoot"),V.Wb(196,"tr"),V.Wb(197,"td",55),V.Wb(198,"button",56),V.gc("click",function(){return e.createFile()}),V.Rb(199,"i",57),V.Qc(200," Upload"),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Wb(201,"div",52),V.Wb(202,"div",58),V.Wb(203,"button",59),V.Qc(204," Submit for Approval"),V.Vb(),V.Wb(205,"button",59),V.Qc(206," Standard Library"),V.Vb(),V.Wb(207,"button",60),V.Qc(208," CANCEL"),V.Vb(),V.Wb(209,"button",61),V.Qc(210,"Save"),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Wb(211,"div",62,63),V.gc("onHide",function(){return e.resetForm()}),V.Wb(213,"div",64),V.Wb(214,"div",65),V.Wb(215,"div",66),V.Wb(216,"h4",67),V.Qc(217,"Create File"),V.Vb(),V.Wb(218,"button",68),V.gc("click",function(){return V.Fc(o),V.Dc(212).hide()}),V.Wb(219,"span",69),V.Qc(220,"\xd7"),V.Vb(),V.Vb(),V.Vb(),V.Wb(221,"div",70),V.Wb(222,"form",71),V.gc("ngSubmit",function(){return e.fileUpload()}),V.Wb(223,"div",70),V.Wb(224,"div",25),V.Wb(225,"div",40),V.Wb(226,"div",25),V.Wb(227,"div",72),V.Wb(228,"label",73),V.Qc(229,"File Name "),V.Vb(),V.Vb(),V.Wb(230,"div",74),V.Rb(231,"input",75),V.Vb(),V.Vb(),V.Vb(),V.Wb(232,"div",40),V.Wb(233,"div",25),V.Wb(234,"div",72),V.Wb(235,"label",76),V.Qc(236," Uploaded by "),V.Vb(),V.Vb(),V.Wb(237,"div",74),V.Rb(238,"p-dropdown",77),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Wb(239,"div",25),V.Wb(240,"div",40),V.Wb(241,"div",25),V.Wb(242,"div",72),V.Wb(243,"label",78),V.Qc(244,"File Type "),V.Vb(),V.Vb(),V.Wb(245,"div",74),V.Rb(246,"p-dropdown",79),V.Vb(),V.Vb(),V.Vb(),V.Wb(247,"div",40),V.Wb(248,"div",25),V.Wb(249,"div",72),V.Wb(250,"label",80),V.Qc(251,"Valid Until "),V.Vb(),V.Vb(),V.Wb(252,"div",74),V.Rb(253,"input",81),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Wb(254,"div",25),V.Wb(255,"div",40),V.Wb(256,"div",25),V.Wb(257,"div",72),V.Wb(258,"label",82),V.Qc(259,"File "),V.Vb(),V.Vb(),V.Wb(260,"div",74),V.Wb(261,"input",83),V.gc("change",function(t){return e.onFileSelect(t)}),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Wb(262,"div",40),V.Wb(263,"div",25),V.Wb(264,"div",72),V.Wb(265,"label",84),V.Qc(266,"Remark "),V.Vb(),V.Vb(),V.Wb(267,"div",74),V.Rb(268,"textarea",85),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Wb(269,"div",86),V.Wb(270,"div",87),V.Wb(271,"div",88),V.Wb(272,"button",89),V.Qc(273,"Save changes"),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Wb(274,"div",90,91),V.Wb(276,"div",92),V.Wb(277,"div",65),V.Wb(278,"div",66),V.Wb(279,"h4",67),V.Qc(280,"Success"),V.Vb(),V.Vb(),V.Wb(281,"div",70),V.Wb(282,"p"),V.Qc(283),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Wb(284,"div",93,94),V.Wb(286,"div",95),V.Wb(287,"div",65),V.Wb(288,"div",66),V.Wb(289,"h4",67),V.Qc(290,"Error"),V.Vb(),V.Vb(),V.Wb(291,"div",70),V.Wb(292,"p"),V.Qc(293),V.Vb(),V.Vb(),V.Rb(294,"div",86),V.Vb(),V.Vb(),V.Vb()}2&t&&(V.Db(1),V.rc("formGroup",e.fpsEditForm),V.Db(15),V.Sc(" ",e.oppt_details.customer.company_name," "),V.Db(6),V.Rc(e.form_controls.fps_no.value),V.Db(7),V.rc("options",e.fpsTypeList),V.Db(5),V.rc("options",e.fpsStatusList),V.Db(8),V.Sc(" ",V.nc(43,25,e.oppt_details.created_at,"dd-MMM-yyyy")," "),V.Db(7),V.Sc(" ",e.current_apportunity_id," "),V.Db(29),V.rc("options",e.payment_frequency_list),V.Db(1),V.rc("displayError",e.isFieldValid("fps_payment_frequency")),V.Db(4),V.rc("options",e.tenure_list),V.Db(1),V.rc("displayError",e.isFieldValid("fps_tenure_id")),V.Db(7),V.rc("options",e.institutions_list),V.Db(1),V.rc("displayError",e.isFieldValid("fps_financier_id")),V.Db(11),V.rc("readonly",!0),V.Db(44),V.rc("options",e.fps_user_list),V.Db(4),V.rc("readonly",9!=e.fpsEditForm.controls.fps_status_id.value),V.Db(7),V.rc("options",e.fps_user_list),V.Db(8),V.rc("ngIf",e.has_min_procedure),V.Db(1),V.rc("ngIf",e.has_consumable_usage),V.Db(27),V.rc("ngForOf",e.fileList),V.Db(28),V.rc("formGroup",e.fileUploadForm),V.Db(16),V.rc("options",e.fps_user_list),V.Db(8),V.rc("options",e.fileTypeList),V.Db(37),V.Rc(e.alertBody),V.Db(10),V.Rc(e.alertBody))},directives:[p.z,p.q,p.j,p.c,p.p,p.h,P.a,w,p.u,s.p,s.o,c.a,p.d,p.k],pipes:[s.f],styles:[".bordered[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{border:1px solid #d7d7d7;box-sizing:border-box;border-radius:6px;padding:.25em 2em;white-space:nowrap}.bordered[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#59a5d8}","opp-opportunity-booking[_ngcontent-%COMP%]{width:100%}.card[_ngcontent-%COMP%], .card-header[_ngcontent-%COMP%]{border-radius:0}.card-header[_ngcontent-%COMP%]{background-color:#898485;color:#fff}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-header{font-size:24px;font-weight:bolder;background:#fff}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-header span.pi{margin-top:-8px;position:absolute;right:.5em;top:50%}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-header .p-accordion-header-link{background:#fff}[_nghost-%COMP%]     .customColor.p-accordion .p-accordion-content{padding:0}td[_ngcontent-%COMP%]{text-align:center}  .nav-link.active{background:#2297e6!important;color:#fff!important}  .nav-tabs .nav-link{border:none!important;border-left:1px solid!important}.bg-lightgrey[_ngcontent-%COMP%]{background:#fcfcfc}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   td[_ngcontent-%COMP%], .no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   th[_ngcontent-%COMP%]{border-top:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%], .no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   th[_ngcontent-%COMP%]{border-bottom:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-left:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-right:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{border-left:none!important}.no-outline[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{border-right:none!important}.btn-custom[_ngcontent-%COMP%]{background-color:#00538a;border-color:#00538a;color:#fff}.chead[_ngcontent-%COMP%]{font-size:24px;line-height:34px;font-style:normal;font-weight:600}.btn-icon[_ngcontent-%COMP%]{height:2rem;line-height:1rem;padding:0!important;width:2rem;font-size:1.2rem!important;font-weight:700;border-radius:50%;text-align:center}.btn-in-tab[_ngcontent-%COMP%]{position:absolute;right:-3.5rem;height:1.5rem!important;line-height:.75rem;width:1.5rem!important;font-size:.9rem}.btn-white[_ngcontent-%COMP%]{color:#fff;border-color:#fff}.btn-white[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-top:.2rem}.p-relative[_ngcontent-%COMP%]{position:relative}.p-0[_ngcontent-%COMP%]{padding:0!important}.p-125[_ngcontent-%COMP%]{padding:1.25rem}.b-btm-green[_ngcontent-%COMP%]{border-bottom:3px solid #5dbec0}.bg-opp[_ngcontent-%COMP%]{background-color:#5dbec0}.table-price[_ngcontent-%COMP%]{border-radius:30px}[_nghost-%COMP%]     .p-paginator .p-paginator-current{margin-left:auto}[_nghost-%COMP%]     .p-progressbar{height:.5rem;background-color:#d8dadc}[_nghost-%COMP%]     .p-progressbar .p-progressbar-value{background-color:#607d8b}[_nghost-%COMP%]     .table-header{display:flex;justify-content:space-between}[_nghost-%COMP%]     .p-calendar .p-datepicker{min-width:25rem}[_nghost-%COMP%]     .p-calendar .p-datepicker td{font-weight:400}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-header{padding:1rem;text-align:left;font-size:1.5rem;background-color:#898485;color:#fff}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-paginator{padding:1rem}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-thead>tr>th{text-align:left}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr>td{cursor:auto}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-dropdown-label:not(.p-placeholder){text-transform:uppercase}[_nghost-%COMP%]     .p-datatable-opportunity .p-datatable-tbody>tr>td .p-column-title{display:none}[_nghost-%COMP%]     .p-calendar, [_nghost-%COMP%]     .p-inputnumber{width:100%}[_nghost-%COMP%]     p-checkbox+label{display:inline-block;margin-bottom:0;padding-left:5px}[_nghost-%COMP%]     .p-disabled{background-color:#e4e7ea;opacity:1}[_nghost-%COMP%]     .p-dropdown .p-dropdown-label{padding:0}[_nghost-%COMP%]     table#sku_rate{width:95%;margin:auto}[_nghost-%COMP%]     table#sku_rate_datails{width:92.5%;margin:0 auto}.fa[_ngcontent-%COMP%], .icon-plus[_ngcontent-%COMP%]{cursor:pointer}.custom-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;padding:0 25px}@media screen and (max-width:960px){[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tfoot>tr>td, [_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-thead>tr>th{display:none!important}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr{border-bottom:1px solid var(--layer-2)}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr>td{text-align:left;display:block;border:0!important;width:100%!important;float:left;clear:left;border:0}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr>td .p-column-title{padding:.4rem;min-width:30%;display:inline-block;margin:-.4rem 1rem -.4rem -.4rem;font-weight:700}[_nghost-%COMP%]     .p-datatable.p-datatable-opportunity .p-datatable-tbody>tr>td .p-progressbar{margin-top:.5rem}}"]}),Bt)},{path:"sku-listing",component:lt},{path:"sku-create",component:Ct},{path:"sku-edit",component:Ct},{path:":id/sku-edit",component:At},{path:"**",redirectTo:"fps-listing"}],Ht=((Kt=function e(){t(this,e)}).\u0275fac=function(t){return new(t||Kt)},Kt.\u0275mod=V.Ob({type:Kt}),Kt.\u0275inj=V.Nb({imports:[[f.g.forChild(Xt)],f.g]}),Kt),$t=((jt=function e(){t(this,e)}).\u0275fac=function(t){return new(t||jt)},jt.\u0275mod=V.Ob({type:jt}),jt.\u0275inj=V.Nb({imports:[[s.c,Ht,m.f,p.l,p.v,c.b,b.b,l.a,u.b]]}),jt)}}])}();